function setHeader(n,t,i){if(typeof _webSession!="undefined"&&_webSession)return _webSession.UserName()!==""?(n.setRequestHeader("UserName",_webSession.UserName()),n.setRequestHeader("Warehouse",_webSession.CurrentWhs()),n.setRequestHeader("Environment",_webSession.Environment()),n.setRequestHeader("SessionId",_webSession.SessionId()),n.setRequestHeader("ProcessStartDateTime",_webSession.getProcessStartTime()),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Content-Type","application/json"),localStorage.getItem("MachineName")!=undefined&&localStorage.getItem("MachineName")!="noworkstation"&&n.setRequestHeader("MachineName",localStorage.getItem("MachineName")),i?n.setRequestHeader("Authorization","Bearer "+i):(n.bearerToken=manhAdal.acquireToken(),n.bearerToken&&n.setRequestHeader("Authorization","Bearer "+n.bearerToken)),!0):(window.location="/SCALE/Security/Login?error=userSessionTimeOutMessage",!1)}function HttpRequest(){this.responseError=null}function EvaluateOR(n,t){var r=!1,i=[],u=[];return u=n.split("||"),$.each(u,function(i,v){var conditionLeft,conditionRight,evalCondition;if(i=v.trim().split(" "),i.length==3){if(conditionLeft=t[i[0]],conditionLeft&&typeof conditionLeft=="string"&&(conditionLeft=conditionLeft.replace(/'/g,"\\'")),(conditionLeft===""||conditionLeft===undefined)&&(conditionLeft="NULL"),conditionRight=i[2],conditionRight&&typeof conditionRight=="string"&&(conditionRight=decodeURI(conditionRight).replace(/'/g,"\\'")),!isNaN(parseInt(conditionLeft))&&isFinite(conditionLeft)&&!isNaN(parseInt(conditionRight))&&isFinite(conditionRight)&&typeof parseInt(conditionLeft)=="number"&&typeof parseInt(conditionRight)=="number")var numConditionLeft=parseInt(conditionLeft),numConditionRight=parseInt(conditionRight),evalCondition=numConditionLeft+i[1]+numConditionRight;else evalCondition=("'"+conditionLeft+"' ").toUpperCase()+i[1]+(" '"+conditionRight+"'").toUpperCase();if(eval(evalCondition)){r=!0;return}}}),r}function WebSession(){this._processStartTime='"\\/Date('+ +new Date+')\\/"'}function GetQueryStringParams(n,t){var r,i,u;for((t==="undefined"||t===undefined||t===null||t==="")&&(t=decodeURIComponent(window.location.search.substring(1)).replace(/&quot;/g,'"')),(t==="undefined"||t===undefined||t===null||t==="")&&(t=decodeURIComponent(window.location.hash.substring(2)).replace(/&quot;/g,'"')),r=t.split("&"),i=0;i<r.length;i++)if(u=r[i].split("="),u[0]==n)return u[1]}function getUTCTimeValue(n){var t=null,i;return t=n?+new Date(n):+new Date,i=(new Date).getTimezoneOffset()*-6e4,t-i}function RemoveFromArray(n,t){for(var r,i=0;i<t.length;i++)if(r=t[i].split("="),r[0]===n)return t.splice(i,1),t;return t}function EncodeFilterAndRedirect(n){var i=n,r,t;n&&n.length>0&&(r=n.split("?"),r.length>1&&(t=GetQueryStringParams("filters",n.split("?")[1]),t&&t!==""&&(i=n.replace("filters="+t,"filters="+encodeURIComponent(t)))),document.location.href=i)}function getCookie(n){for(var r=n+"=",u=document.cookie.split(";"),i,t=0;t<u.length;t++)if(i=u[t].trim(),i.indexOf(r)==0)return i.substring(r.length,i.length);return""}function getUserInformationCookieValue(n){var t;if(document.cookie.length>0){var u=getCookie("UserInformation"),i=u.split("&"),r={};for(t=0;t<i.length;++t)i[t].replace(/^\s*([^=]+)=(.*)$/,function(n,t,i){r[t]=decodeURIComponent(i)});return r[n]}return""}function setCurrentWhsCookieValue(n,t){if(document.cookie.length>0){var i=getCookie("UserInformation"),r=i.replace("Warehouse="+n,"Warehouse="+encodeURIComponent(t),"g");createCookie("UserInformation",r,1)}}function isMobileView(n){var t=GetQueryStringParams("platform",n.split("?")[1]);return t!==undefined&&(t.replace(/[^a-zA-Z0-9]/g,"").toUpperCase()==="ANDROID"||t.replace(/[^a-zA-Z0-9]/g,"").toUpperCase()==="IOS")?!0:!1}function WebUi(){}function processWorkStation(){_httpRequest.performGet("/general/scaleapi/GenericConfigDetailApi/GetByRecordType?recordType=WORKSTATION",_webUi.dialog.showWorkStationModalDialog,null,!0,!1,!0)}function configureEditorClasses(){$(".ui-igedit-disabled").parent("span").addClass("disabled"),$(".readonlynumeric.ui-igedit-disabled").parent("span").removeClass("disabled"),$(".readonlyeditor.ui-igedit-disabled").parent("span").removeClass("disabled"),$(".readonlydateeditor.ui-igedit-disabled").parent("span").removeClass("disabled"),$("[data-name=SearchPane]").find("[lookup]").parent("div").parent("div").css("width","91%"),$("[data-name=SearchPane]").find("[lookup]").parent("div").parent("div").css("margin-right","2px"),$("[data-name=SearchPane]").find(".daterangecontrol").parent("div").css("margin-bottom",".25em")}function customizeIcons(){_webUi.accordion&&$.isFunction(_webUi.accordion.customizeIcons)&&_webUi.accordion.customizeIcons()}function toggleSidebar(){var n=$(".navbar-header a.navbar-brand"),t=_webUi.LocalStorage.getLocalStorage(n.attr("data-resourcekey"),"menu-sideBar-toggle","toggled");t==="true"&&($(".accordionsidebar").addClass("toggled"),$("#arrowExpandCollapse").removeClass("far fa-chevron-circle-left"),$("#arrowExpandCollapse").addClass("far fa-chevron-circle-right"))}function removeExtraPanels(){var n,t;$("li.dropdown").unwrap("div"),n=$("li.dropdownaction"),$.each(n,function(n,t){$(t).parent().is("div")&&$(t).unwrap("div")}),t=$(".menubutton"),$.each(t,function(n,t){($(t).parent().hasClass("menubuttonpanel")||$(t).parent().hasClass("ScreenControlMenuButton"))&&$(t).unwrap("div")})}function loadInsightDataOnReady(){$(document).ajaxComplete(function(n,t,i){var r,u;i.url.indexOf("Insight/ListPaneGridDataSourceBind")>-1&&(_webUi.insightSearchPaneActions.fillListPaneSummaryTiles($.parseJSON(t.responseText).TileData),$("#exportToExcelForm").attr("action",i.url),$("#exportToExcelForm").attr("data-requestBody",i.data),_webUi.Grid.loadDefaults(),t.responseText&&(r=$.parseJSON(t.responseText).ErrorInfo,r!==undefined&&r!==null&&_webUi.msgManager.showError(r.Message))),i.url.indexOf("Detail/DetailsGridDataSourceBind")>-1&&_webUi.Grid.loadDefaults(),$(window).trigger("resize"),u="[data-controlType=igDialog]";$(u).on("igdialogstatechanging",function(n,t){var r,i;t.action==="open"&&(r=$(this).find("[autofocus]:first"),r&&(i=r.attr("data-ControlType"),i==="igTextEditor"&&$(this).find("[autofocus]:first").igTextEditor("setFocus"),i==="igDatePicker"&&$(this).find("[autofocus]:first").igDatePicker("setFocus"),i==="igDateTimeEditor"&&$(this).find("[autofocus]:first").igDateEditor("setFocus"),i==="igNumericEditor"?$(this).find("[autofocus]:first").igNumericEditor("setFocus"):i==="igCombo"&&$(this).find("[autofocus]:first").igCombo("setFocus")))});_webUi.Grid&&_webUi.Grid.strikeThroughGridData(),$("[data-defaultTopLabel]").each(function(){_webUi.label.UpdateInlineLabelOnFocus("",$(this))})})}function DisplayResourceKey(){_webUi.Grid&&_webUi.Grid.AddResourceDataAttributes();var n=getCookie("resourceState");n=="ON"&&(ShowResourceKey(),resourceKeySwitch="ON")}function ToggleResourecKey(){_webUi.Grid&&_webUi.Grid.AddResourceDataAttributes(),resourceKeySwitch=="OFF"?(ShowResourceKey(),resourceKeySwitch="ON"):(ShowResourceValue(),resourceKeySwitch="OFF"),createCookie("resourceState",resourceKeySwitch,1)}function HelpAbout(){var n,t=window.location.pathname.split("/");n=t[1].toLowerCase()==="tpm"?"/tpm/general/helpAbout?isTpm=true":"/scale/general/helpAbout?isTpm=false",_webUi.dialog.showHelpAboutModalDialog(n)}function RestoreDefaultSettings(){$("#chkListPaneDataGridgridGroupColumnsPreference").prop("checked",!0),$("#chkListPaneDataGridgridColumnPreference").prop("checked",!0),$("#chkListPaneDataGridgridSortPreference").prop("checked",!0),$("#RestoreDefaultSettingsDialog").dialog("open")}function isInlineText(n){var t=!1;return($(n).attr("data-controltype")=="igTextEditor"||$(n).attr("data-controltype")=="igDateEditor"||$(n).attr("data-controltype")=="igDatePicker"||$(n).attr("data-controltype")=="igNumericEditor"||$(n).attr("data-controltype")=="igCombo"||$(n).attr("data-controltype")=="igComboMultiSelectWithCheckBox")&&(t=!0),t}function ChangeInlineText(n,t){var i=$(n);i.attr("data-controltype")=="igTextEditor"&&i.data("igTextEditor")!=undefined?i.igTextEditor("option","placeHolder")!=null&&i.igTextEditor("option","placeHolder",t):i.attr("data-controltype")=="igDateEditor"&&i.data("igDateEditor")!=undefined?i.igDateEditor("option","placeHolder")!=null&&i.igDateEditor("option","placeHolder",t):i.attr("data-controltype")=="igDatePicker"&&i.data("igDatePicker")!=undefined?i.igDatePicker("option","placeHolder")!=null&&i.igDatePicker("option","placeHolder",t):i.attr("data-controltype")=="igNumericEditor"&&i.data("igNumericEditor")!=undefined?i.igNumericEditor("option","placeHolder")!=null&&i.igNumericEditor("option","placeHolder",t):i.attr("data-controltype")=="igCombo"&&i.data("igCombo")!=undefined?i.igCombo("option","locale").placeHolder!=null&&i.igCombo("option","locale",{placeHolder:t}):i.attr("data-controltype")=="igComboMultiSelectWithCheckBox"&&i.data("igCombo")!=undefined&&i.igCombo("option","locale").placeHolder!=null&&i.igCombo("option","locale",{placeHolder:t})}function ShowResourceKey(n){for(var i=typeof n!==undefined?$("[data-ResourceKey]",n):$("[data-ResourceKey]"),u=!1,e="",f,r,o,s,t=0;t<i.length;t++)f=$(i[t]).attr("class"),f!="LabelInline"&&(r=$(i[t]).attr("data-ResourceKey"),o=$(i[t]).attr("data-ResourceValue"),e!==r&&(u=!1),u||((r!=null||r!="")&&isInlineText(i[t])==!1?(s=$(i[t]).html().replace($("<div/>").text(o).html(),r),$(i[t]).html(s)):ChangeInlineText(i[t],r))),isLabelThatItIsNotInline(f,u)&&(u=!0),e=r;return typeof n!==undefined?n:!0}function ShowResourceValue(n){for(var i=typeof n!==undefined?$("[data-ResourceKey]",n):$("[data-ResourceKey]"),u=!1,o="",e,r,f,s,t=0;t<i.length;t++)e=$(i[t]).attr("class"),e!="LabelInline"&&(r=$(i[t]).attr("data-ResourceValue"),f=$(i[t]).attr("data-ResourceKey"),o!==f&&(u=!1),u||((r!=null||r!="")&&isInlineText(i[t])==!1?(s=$(i[t]).html().replace(f,r),$(i[t]).html(s)):ChangeInlineText(i[t],r))),isLabelThatItIsNotInline(e,u)&&(u=!0),o=f;return typeof n!==undefined?n:!0}function getCookie(n){return document.cookie.length>0&&(c_start=document.cookie.indexOf(n+"="),c_start!=-1)?(c_start=c_start+n.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),decodeURIComponent(document.cookie.substring(c_start,c_end))):""}function closeDialogsWhenAccordionCollapses(n){var t=[];t=n.find($("[data-controltype='igGrid']")),t!==undefined&&$.each(t,function(n,t){var i,r,u,f,e;t&&t.id&&(i=$("#"+t.id),i&&i.data("igGrid")&&(r=i.igGrid("option","features"),u=$.grep(r,function(n){return n.name==="GroupBy"}),u&&u.length>0&&i.igGridGroupBy("closeGroupByDialog"),f=$.grep(r,function(n){return n.name==="Hiding"}),f&&f.length>0&&i.igGridHiding("hideColumnChooser"),e=$.grep(r,function(n){return n.name==="Sorting"}),e&&e.length>0&&i.igGridSorting("closeMultipleSortingDialog")))})}var isLabelThatItIsNotInline,createCookie,saveSystemMenuPreference,handleSystemMenuCloseOnClick,indicatorTiles,lookup;$.support.cors=!0,HttpRequest.prototype.performGet=function(n,t,i,r,u,f){this.performRequest(n,"GET",undefined,t,i,r,u,f)},HttpRequest.prototype.performPost=function(n,t,i,r,u){this.performRequest(n,"POST",t,i,r,!1,u)},HttpRequest.prototype.performPost=function(n,t,i,r,u,f){this.performRequest(n,"POST",t,i,r,!1,u,f)},HttpRequest.prototype.performPut=function(n,t,i,r,u){this.performRequest(n,"PUT",t,i,r,!1,u)},HttpRequest.prototype.performDelete=function(n,t,i,r){this.performRequest(n,"DELETE",undefined,t,i,!1,r)},HttpRequest.prototype.performRequest=function(n,t,i,r,u,f,e,o){var h,c,s;(o===undefined||o===!0)&&_webUi.helper.openAjaxLoading(),this.validateAsynchronousParam(e)?(h=Q.defer(),c=h.promise,manhAdal.acquireToken(h),c.then(function(s){var h=$.ajax({url:n,type:t,cache:f,crossDomain:!0,async:_httpRequest.validateAsynchronousParam(e),data:i!=undefined?JSON.stringify(i,_webUi.dateReplacer):undefined,beforeSend:function(n,t){setHeader(n,t,s)}});(o===undefined||o===!0)&&h.always(_webUi.helper.closeAjaxLoading),typeof r!="function"?h.done(_httpRequest.defaultSuccessCallback):h.done(r),typeof u!="function"?h.fail(_httpRequest.defaultErrorCallback):h.fail(u)})):(console.log("This call is synchronous call, please convert to asynchronous to deal with access denied issue."+n),s=$.ajax({url:n,type:t,cache:f,crossDomain:!0,async:_httpRequest.validateAsynchronousParam(e),data:i!=undefined?JSON.stringify(i,_webUi.dateReplacer):undefined,beforeSend:setHeader}),(o===undefined||o===!0)&&s.always(_webUi.helper.closeAjaxLoading),typeof r!="function"?s.done(_httpRequest.defaultSuccessCallback):s.done(r),typeof u!="function"?s.fail(_httpRequest.defaultErrorCallback):s.fail(u))},HttpRequest.prototype.defaultErrorCallback=function(n,t,i){var r=retriveErrorMessage(n,t,i);$.trim(r)&&_webUi.msgManager.displayNotificationMessage({Message:r,MessageType:"Error"})},HttpRequest.prototype.errorCallbackWithSound=function(n,t,i){var r=retriveErrorMessage(n,t,i);$.trim(r)&&_webUi.msgManager.showErrorWithSound(r)},retriveErrorMessage=function(n){var r="",u=n.getResponseHeader("Content-Type");return n.status===0||([400,403,404,406,409,415,500].indexOf(n.status)>-1&&u&&(u.indexOf("/json")!=-1||u.indexOf("+json")!=-1)?(this.responseError=JSON.parse(n.responseText),r=this.responseError.Message,$.trim(r)?this.responseError.AdditionalErrors&&$.each(this.responseError.AdditionalErrors,function(n,t){r+="<\/br>"+t.Message}):r="Internal server error. Please consult the Audit Log."):r=n.responseText),r},HttpRequest.prototype.defaultSuccessCallback=function(n){_webUi.msgManager.displayNotificationMessage(n)},HttpRequest.prototype.appendUrlQueryString=function(n,t,i){return n==""||n==undefined||n==null?n:n=n.indexOf("?")>-1?n+"&"+t+"="+i:n+"?"+t+"="+i},HttpRequest.prototype.addRequestHeader=function(n,t){$(document).ajaxSend(function(i,r){r.setRequestHeader(n,t)})},HttpRequest.prototype.validateAsynchronousParam=function(n){var t;return t=typeof n=="undefined"?!0:n===""?!0:typeof n=="boolean"?n:typeof n=="string"?n.toLowerCase()=="true"?!0:!1:!0},HttpRequest.prototype.openUrlInCurrentTabWithPost=function(n,t){document.body.innerHTML=document.body.innerHTML+"<form method='post' id='DynamicFormForPostingTheData' action=''><input type = 'hidden' name='postFormData' id='postFormData' /><input type = 'hidden' name='FormPostAuthBearerToken' id='FormPostAuthBearerToken' /><\/form>",$("#DynamicFormForPostingTheData").attr("action",t),$("#postFormData").val(typeof n=="string"?n:JSON.stringify(n)),$("#FormPostAuthBearerToken").val("Bearer "+manhAdal.acquireToken()),$("#DynamicFormForPostingTheData").submit()};var _httpRequest=new HttpRequest,_webUi=new WebUi,_webSession=new WebSession,resourceKeySwitch="OFF";_webUi.WebUi=function(){return{isPageLoad:!0,canActionBeEnabled:function(value,rowdata){var enable=!0,condition,expression;return value.indexOf("{{")>0&&(value=value.trim(),value=_webUi.handlebars.getCompiledText(value,rowdata),value)?enable=eval(value):(condition=[],expression=[],expression=value.split("&&"),$.each(expression,function(i,v){var conditionLeft,conditionRight,evalCondition;if(v.indexOf("||")>0){if(condition=v.substring(v.indexOf("(")+1,v.indexOf(")")),!EvaluateOR(condition,rowdata)){enable=!1;return}}else if(condition=v.trim().split(" "),condition.length==3){if(conditionLeft=condition[0]&&condition[0]==="_webUi.detailsScreenBinding.screenMode"?_webUi.detailsScreenBinding.screenMode:rowdata[condition[0]],conditionLeft&&typeof conditionLeft=="string"&&(conditionLeft=escape(conditionLeft.replace(/'/g,"\\'"))),(conditionLeft===""||conditionLeft===undefined)&&(conditionLeft="NULL"),conditionRight=condition[2],conditionRight&&typeof conditionRight=="string"&&(conditionRight=decodeURI(conditionRight).replace(/'/g,"\\'")),!isNaN(parseInt(conditionLeft))&&isFinite(conditionLeft)&&!isNaN(parseInt(conditionRight))&&isFinite(conditionRight)&&typeof parseInt(conditionLeft)=="number"&&typeof parseInt(conditionRight)=="number")var numConditionLeft=parseInt(conditionLeft),numConditionRight=parseInt(conditionRight),evalCondition=numConditionLeft+condition[1]+numConditionRight;else typeof conditionLeft=="boolean"&&(conditionRight==="1"||conditionRight==="0")?(conditionRight=conditionRight==="1"?!0:!1,evalCondition=("'"+conditionLeft+"' ").toUpperCase()+condition[1]+(" '"+conditionRight+"'").toUpperCase()):typeof conditionRight=="boolean"&&(conditionLeft==="1"||conditionLeft==="0")?(conditionLeft=conditionLeft==="1"?!0:!1,evalCondition=("'"+conditionLeft+"' ").toUpperCase()+condition[1]+(" '"+conditionRight+"'").toUpperCase()):evalCondition=("'"+conditionLeft+"' ").toUpperCase()+condition[1]+(" '"+conditionRight+"'").toUpperCase();if(!eval(evalCondition)){enable=!1;return}}else if(condition[0]=="false"){enable=!1;return}}),enable)},getMaxValue:function(n){var r=ResourceManager.GetResource(n,ResourceManager.ResourceType.Text).FIELD_LENGTH,i=ResourceManager.GetResource(n,ResourceManager.ResourceType.Text).DECIMAL_POS,u=r-i,t=Array(u+1).join("9"),f=Array(i+1).join("9");return i>0?(t=t.concat("."),Number(t.concat(f))):Number(t)},applyDecimalPositionsToGridColumn:function(n){var i=ResourceManager.GetResource(n,ResourceManager.ResourceType.Text).DECIMAL_POS,t="##,###,###,###,##0";return i>0&&(t=t+"."+Array(i+1).join("0")),t},getIgniteUIRegionalSetting:function(n){return n.split("-",1)=="en"||n.split("-",1)=="fr"||n.split("-",1)=="pt"||n.split("-",1)=="sr"||n.split("-",1)=="zh"?n:n.split("-",1)[0]},getUTCTimeValue:function(n){return getUTCTimeValue(n)},isMobileview:function(n){return isMobileView(n)},processWorkStationAssignment:function(){processWorkStation()}}}(),WebSession.prototype.UserName=function(){return getUserInformationCookieValue("UserName")},WebSession.prototype.getProcessStartTime=function(){return this._processStartTime},WebSession.prototype.resetProcessStartTime=function(){this._processStartTime='"\\/Date('+ +new Date+')\\/"'},WebSession.prototype.CurrentWhs=function(){return getUserInformationCookieValue("Warehouse")},WebSession.prototype.setCurrentWhs=function(n,t){var r,i,u,f,e;n&&(r=n.text,i=$("#currentWhsVal"),i&&(u=i[0].textContent,u!==r&&(i[0].textContent=i[0].textContent.replace(u,r,"g"),setCurrentWhsCookieValue(u,r),t&&(f=window.location.href,isMobileView(f)?window.location.reload():(e=_webUi.helper.removeAllQueryParamsFromUrl(f),e!==f?window.location=_webUi.helper.removeAllQueryParamsFromUrl(window.location.href):window.location.reload())))))},WebSession.prototype.Environment=function(){return getUserInformationCookieValue("Environment")},WebSession.prototype.SessionId=function(){return getUserInformationCookieValue("SessionId")},WebSession.prototype.LicensedModules=function(){var n=getUserInformationCookieValue("LicensedModules");return n&&n.length>0?n.split("|"):undefined},WebSession.prototype.UserDefaultCulture=function(){return getUserInformationCookieValue("UserDefaultCulture")},WebUi.prototype.getNamespaceAndFunctionName=function(n){return n&&n.indexOf("(")>-1?namespaceAndFunction=n.substring(0,n.indexOf("(")):n},WebUi.prototype.getArguments=function(n){if(n&&n.indexOf("(")>-1){var t=n.substring(n.indexOf("(")+1,n.indexOf(")"));return t.split(",")}return null},WebUi.prototype.executeFunctionByName=function(n,t){for(var f=[].slice.call(arguments).splice(2),r=n.split("."),u=r.pop(),i=0;i<r.length;i++)t=t[r[i]];return typeof t[u]=="function"?t[u].apply(this,f):null},WebUi.prototype.isSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)},WebUi.prototype.getMaxNumericLengthBasedOnResourceFile=function(n){return n>15?15:n},WebUi.prototype.getMaxValueBasedOnResourceFile=function(n,t){var u=n-t,r,i;if(u<=0)return null;for(u+t>15&&(u=15-t-(t>0?1:0)),r="",i=0;i<u;i++)r+="9";if(t>0)for(r+=".",i=0;i<t;i++)r+="9";return parseFloat(r)},WebUi.prototype.dateReplacer=function(n,t){if(this[n]instanceof Date){var i=this[n];return i.getFullYear()+"-"+_webUi.frontAppendZeros(i.getMonth()+1,2)+"-"+_webUi.frontAppendZeros(i.getDate(),2)+"T"+_webUi.frontAppendZeros(i.getHours(),2)+":"+_webUi.frontAppendZeros(i.getMinutes(),2)+":"+_webUi.frontAppendZeros(i.getSeconds(),2)}return t},WebUi.prototype.frontAppendZeros=function(n,t){var r="";for(i=0;i<t;i++)r=r+"0";return String(r+n).slice(-t)},WebUi.prototype.setWorkStation=function(n){localStorage.setItem("MachineName",n)},$(document).ajaxSend(function(n,t,i){var c=i.url,s,e,u;if(t.bearerToken?delete t.bearerToken:t.setRequestHeader("Authorization","Bearer "+manhAdal.acquireToken()),i.url.indexOf("Insight/ListPaneGridDataSourceBind")>-1){s=GetQueryStringParams("frmId",c.split("?")[1]),_webUi.insightSearchPaneActions.formId=s,e="",_webUi.insightSearchPaneActions.queryStringGridFilters&&_webUi.insightSearchPaneActions.queryStringGridFilters.length>0||_webUi.insightSearchPaneActions.queryStringAdvanceGridFilters!=null&&_webUi.insightSearchPaneActions.queryStringAdvanceGridFilters!="undefined"?(_webUi.insightSearchPaneActions.queryStringGridFilters&&_webUi.insightSearchPaneActions.queryStringGridFilters.length>0&&_webUi.insightSearchPaneActions.applyInputFilterCriteria(_webUi.insightSearchPaneActions.queryStringGridFilters),_webUi.insightSearchPaneActions.queryStringAdvanceGridFilters!=null&&_webUi.insightSearchPaneActions.queryStringAdvanceGridFilters!="undefined"&&_webUi.insightSearchPaneActions.applyInputAdvanceFilterCriteria(_webUi.insightSearchPaneActions.queryStringAdvanceGridFilters,s),e=_webUi.insightSearchPaneActions.getAllFilterCriterias(),e=JSON.stringify(e,_webUi.dateReplacer),_webUi.insightSearchPaneActions.setMainInsightGridDataSource(e),_webUi.insightSearchPaneActions.queryStringGridFilters=null,_webUi.insightSearchPaneActions.queryStringAdvanceGridFilters=null):(_webUi.insightSearchPaneActions!==undefined&&_webUi.insightSearchPaneActions.returnResults!==undefined&&(!_webUi.WebUi.isPageLoad||window.location.href.indexOf("?")>-1&&window.location.href.indexOf("?")<window.location.href.length)&&(_webUi.insightSearchPaneActions.returnResults=!0),e=_webUi.insightSearchPaneActions.getAllFilterCriterias(),e=JSON.stringify(e,_webUi.dateReplacer));var f={},h=c.split("?")[0],o=i.url.split("?")[1],r=o.split("&");e&&e!==""||(e=decodeURIComponent(GetQueryStringParams("fltrs",o))),f.frmId=GetQueryStringParams("frmId",o),r=RemoveFromArray("frmId",r),f.tbl=GetQueryStringParams("tbl",o),r=RemoveFromArray("tbl",r),f.grdId=GetQueryStringParams("grdId",o),r=RemoveFromArray("grdId",r),f.fltrs=e,r=RemoveFromArray("fltrs",r),u=h+"?",$.each(r,function(n,t){u=u+t+"&"}),u=u.substring(0,u.length-1),i.url=u,i.type="POST",i.data=JSON.stringify(f,_webUi.dateReplacer),i.hasContent=!0}if(i.url.indexOf("Detail/DetailsGridDataSourceBind")>-1){var f={},h=i.url.split("?")[0],o=i.url.split("?")[1],r=o.split("&");f.frmId=GetQueryStringParams("frmId",o),r=RemoveFromArray("frmId",r),f.tbl=GetQueryStringParams("tbl",o),r=RemoveFromArray("tbl",r),f.grdId=GetQueryStringParams("grdId",o),r=RemoveFromArray("grdId",r),f.internalId=GetQueryStringParams("internalId",o),f.internalId||(f.internalId=-1),r=RemoveFromArray("internalId",r),u=h+"?",$.each(r,function(n,t){u=u+t+"&"}),u=u.substring(0,u.length-1),i.url=u,i.type="POST",i.data=JSON.stringify(f,_webUi.dateReplacer),i.hasContent=!0}if(i.url.indexOf("Transaction/TransactionPaneGridDataSourceBind")>-1){var f={},h=i.url.split("?")[0],o=i.url.split("?")[1],r=o.split("&"),e="";e&&e!==""||(e=decodeURIComponent(GetQueryStringParams("fltrs",o))),f.frmId=GetQueryStringParams("frmId",o),r=RemoveFromArray("frmId",r),f.tbl=GetQueryStringParams("tbl",o),r=RemoveFromArray("tbl",r),f.grdId=GetQueryStringParams("grdId",o),r=RemoveFromArray("grdId",r),f.fltrs=e,r=RemoveFromArray("fltrs",r),u=h+"?",$.each(r,function(n,t){u=u+t+"&"}),u=u.substring(0,u.length-1),i.url=u,i.type="POST",i.data=JSON.stringify(f,_webUi.dateReplacer),i.hasContent=!0}}),$(function(){moment.locale(navigator.language),$("[data-widget=accordion]").accordion("refresh"),_webUi.fixedToTop&&_webUi.fixedToTop.calculateContentPaddingFromFixedTopElements(),$(window).resize(function(){$(".equalize").equalize({reset:!0}),_webUi.fixedToTop&&_webUi.fixedToTop.calculateResizeContentPaddingFromFixedTopElements(),_webUi.monitor&&_webUi.monitor.resizeChart()}),_webUi.validate&&_webUi.validate.setValidationDefaults(),removeExtraPanels(),_webUi.insightSearchPaneActions!==undefined&&_webUi.insightSearchPaneActions.returnResults!==undefined&&(_webUi.insightSearchPaneActions.returnResults=window.location.href.indexOf("?")>-1&&window.location.href.indexOf("?")<window.location.href.length?!0:!1),loadInsightDataOnReady(),_webUi.navigationHeader.configureToggle(),_webUi.navigationHeader.loadDefaultDisplayPreference(),$("[data-widget=Grid]").bind("iggridselectionactiverowchanging",function(){return _webUi.detailPane!=null&&_webUi.detailPane.isDetailPaneStillLoading()===!0?!1:!0}),$(".ui-accordion-header").attr("tabindex","-1"),$(window).trigger("resize"),_webUi.navigationTrail.handleNavTrailOnScreenLoad()}),$(window).bind("load",function(){configureEditorClasses(),customizeIcons();var n=$("[data-widget=accordion]");$.isFunction(WebUi.prototype.accordionbeforeactivateHandler)&&n&&n.length>1&&WebUi.prototype.accordionbeforeactivateHandler(),WebUi.prototype.ActiveDefaultOpenAccordion(),$("[data-name=SearchPane]").find("input").focus(_webUi.label.UpdateInlineLabelOnFocus),$("[data-name=SearchPane]").find("input").addClass("blurLabel"),$("[data-name=SearchPane]").find("input").blur(_webUi.label.UpdateInlineLabelOnBlur),$("[data-name=SearchPane]").find("input[data-controltype='igTextEditor']").prev().bind("mouseup",function(){$(this).next().focus()}),$("[data-name=SearchPane]").find("input[data-controltype='igNumericEditor']").prev().bind("mouseup",function(){$(this).next().focus()}),$("[data-name=SearchPane]").find("input[data-controltype='igDateTimeEditor']").prev().bind("mouseup",function(){$(this).next().focus()}),$("[data-name=SearchPane]").find("input[data-controltype='igDatePicker']").prev().bind("mouseup",function(){$(this).next().focus()}),location.href.toLowerCase().indexOf("scale/insights")>-1&&(_webUi.editors.configureDateEditorEvents(),_webUi.editors.configureDatePickerEvents(),_webUi.editors.configureNumericEditorEvents(),_webUi.editors.configureTextEditorEvents()),toggleSidebar(),_webUi.systemMenu.loadSystemMenuPreference(),saveSystemMenuPreference(),localStorage.getItem("MachineName")!=undefined||isMobileView(window.location.href)||processWorkStation()}),Handlebars.registerHelper("encodeURIComponent",function(n){return encodeURIComponent(n)}),Handlebars.registerHelper("stringify",function(n){var t=JSON.stringify(n);return typeof n=="string"&&(t=t.slice(1,t.length-1)),t}),Handlebars.registerHelper("ifCond",function(v1,operator,v2,options){$.type(v1)=="string"&&v1.startsWith("_webUi")&&(v1=eval(v1));switch(operator){case"==":return v1==v2?options.fn(this):options.inverse(this);case"===":return v1===v2?options.fn(this):options.inverse(this);case"!==":return v1!==v2?options.fn(this):options.inverse(this);case"<":return v1<v2?options.fn(this):options.inverse(this);case"<=":return v1<=v2?options.fn(this):options.inverse(this);case">":return v1>v2?options.fn(this):options.inverse(this);case">=":return v1>=v2?options.fn(this):options.inverse(this);case"&&":return v1&&v2?options.fn(this):options.inverse(this);case"||":return v1||v2?options.fn(this):options.inverse(this);default:return options.inverse(this)}}),WebUi.prototype.getTab=function(n,t){$("#"+n).tabs(t),$("#"+n).prepend("<ul> <\/ul>")},WebUi.prototype.getVerticalTab=function(n,t){$("#"+n).tabs(t).addClass("ui-tabs-vertical ui-helper-clearfix"),$("#"+n+"li").removeClass("ui-corner-top").addClass("ui-corner-left"),$("#"+n).prepend("<ul> <\/ul>")},WebUi.prototype.getSubTab=function(n,t,i){var u="<li><a href='#{href}'>#{label}<\/a><\/li>",f=$(u.replace(/#\{href\}/g,"#"+n).replace(/#\{label\}/g,t)),r=$("#"+i).tabs({active:0});r.find("ul").append(f),r.tabs("refresh")},WebUi.prototype.getAccordion=function(n,t){var i=$("#"+n),r="<div id='"+n+"wrapper' class='accordionwrapper'><\/div>";WebUi.prototype.accordionbeforeactivateHandler=function(){i.bind("accordionbeforeactivate",function(n,t){var r,u,i,f;return t.newHeader[0]?(r=t.newHeader,u=r.next(".ui-accordion-content")):(r=t.oldHeader,u=r.next(".ui-accordion-content")),i=r.attr("aria-selected")=="true",r.toggleClass("ui-corner-all",i).toggleClass("accordion-header-active ui-state-active ui-corner-top",!i).attr("aria-selected",(!i).toString()),f=r.children(".ui-icon"),f.hasClass("ui-icon-plusthick")||f.hasClass("ui-icon-minusthick")?f.toggleClass("ui-icon-plusthick",i).toggleClass("ui-icon-minusthick",!i):f.toggleClass("ui-icon-triangle-1-e",i).toggleClass("ui-icon-triangle-1-s",!i),u.toggleClass("accordion-content-active",!i),i?(closeDialogsWhenAccordionCollapses(u),u.slideUp()):u.slideDown(),!1})},i.wrap(r),i.accordion(t),i.attr("data-widget","accordion"),t.isKoDelayedBinding===!0&&i.bind("accordionbeforeactivate",function(n,t){if(t.newPanel.attr("data-lazyloaded")==="Pending"&&t.newPanel.attr("id")!=undefined&&_webUi.config.ajaxHtml[t.newPanel.attr("id")]!=undefined){t.newPanel.html(_webUi.config.ajaxHtml[t.newPanel.attr("id")].replace(/delayedscript/gi,"script")),t.newPanel.attr("data-lazyloaded","Completed"),delete _webUi.config.ajaxHtml[t.newPanel.attr("id")];var i=getCookie("resourceState");_webUi.detailsScreenBinding.bindHyperLinks(),i==="ON"&&ShowResourceKey($("#"+t.newPanel.attr("id")))}if(t.newPanel[0]&&!ko.dataFor(document.getElementById(t.newPanel[0].id))){_webUi.detailsScreenBinding.addComboMethodToViewModel(t.newPanel[0].id),ko.applyBindings(_webUi.detailsScreenBinding.viewModel,document.getElementById(t.newPanel[0].id)),location.href.toLowerCase().indexOf("scale/insights")>-1&&(_webUi.editors.configureDateEditorEvents(),_webUi.editors.configureDatePickerEvents(),_webUi.editors.configureNumericEditorEvents(),_webUi.editors.configureTextEditorEvents());$("#"+t.newPanel[0].id).find("input[readonly]").on("focus",function(){$(this).trigger("blur")})}})},WebUi.prototype.getSubAccordion=function(n,t,i,r,u){var f,e,o,s;t=unescape(t),f=$("#"+n),e=$("#"+i),f.append("<p><\/p>"),t="<h3><a href='#' data-ResourceKey='"+u+"' data-ResourceValue='"+t+"'>"+t+"<\/a><\/h3>",f.before(t),o=e.accordion("option","active"),s=e.accordion("option","heightStyle"),e.accordion("refresh"),e.accordion({active:o,heightStyle:s}),f.removeClass("ui-accordion-header"),f.addClass(r)},WebUi.prototype.removeUnderscores=function(n){return n?n.replace(/_/g,""):n},WebUi.prototype.createGuid=function(){for(var t="",i,n=0;n<32;n++)(n==8||n==12||n==16||n==20)&&(t=t+"-"),i=Math.floor(Math.random()*16).toString(16).toUpperCase(),t=t+i;return t},WebUi.prototype.getCurrentFormId=function(){var n=$("#formId").first().val();return n?n:"0"},WebUi.prototype.getUserLanguageSetting=function(){var n=getUserInformationCookieValue("Culture");return navigator.userLanguage?n=navigator.userLanguage:navigator.language&&(n=navigator.language),n},WebUi.prototype.getUserRegionalSetting=function(){var n,t,i,r,u;return n=this.getUserLanguageSetting(),n.indexOf("en-")==0||n.indexOf("fr-")==0||n.indexOf("pt-")==0||n.indexOf("sr-")==0||n.indexOf("zh-")==0?(u=n.indexOf("-"),u>0?(i=n.substring(0,2),r=n.substring(3,n.length),t=i+"-"+r.toUpperCase()):t=n):t=n.substring(0,2),t},WebUi.prototype.onKeyPress=function(n,t){var i=n.keyCode?n.keyCode:n.which;return i===13?($("#"+t).click(),!1):!0},WebUi.prototype.ActiveDefaultOpenAccordion=function(){for(var i=$("[data-widget=accordion]"),n=$("[data-widget=accordion] h3"),t=n.length-1,r;t>-1;)n[t].parentElement.id===i[0].id&&n.splice(t,1),t--;i.splice(0,1),r=$("Div[data-defaultopen='true']"),$.each(r,function(t){var r=$(this).prev(),t=n.index(r);i.accordion("option","active",t)})},$(function(){$("#RestoreDefaultSettingsDialog").dialog({dialogClass:"alert-dialog",autoOpen:!1,resizable:!1,width:600,modal:!0})}),$(document).keypress(function(n){var t,i;if(n.keyCode===13){if($("#restoreDefaultSettingConfirmDialog").dialog("isOpen")===!0)return $("#confirmYes").click(),!1;if($("#RestoreDefaultSettingsDialog").dialog("isOpen")===!0)return $("#confirmDialog").click(),!1;$("#"+n.target.id).attr("data-controlType")==="modalDialog"&&$(n.target).find("form").find("button.btn:first").click()}n.keyCode==27&&($("#restoreDefaultSettingConfirmDialog").dialog("isOpen")===!0&&$("#confirmNo").click(),$("#RestoreDefaultSettingsDialog").dialog("isOpen")===!0&&$("#RestoreDefaultSettingsDialog").dialog("close")),n.keyCode==32&&n.target&&$(n.target).hasClass("toggle-focus")&&$(n.target).is(":focus")&&(n.preventDefault(),t=$(n.target).children(),t&&t.length>0&&$(t[0]).attr("data-toggle")==="toggle"&&(i=$(t[0]).children(),i&&i.length>0&&$(i[0]).is(":checkbox")&&$("#"+$(i[0]).attr("id")).bootstrapToggle("toggle")))}),$(document).keydown(function(n){if(n.keyCode==39)try{$(".ui-iggrid-header:focus").next().focus()}catch(n){}if(n.keyCode==37)try{$(".ui-iggrid-header:focus").prev().focus()}catch(n){}}),isLabelThatItIsNotInline=function(n,t){return t?!0:n&&(n.indexOf("LabelTop")>-1||n.indexOf("LabelLeft")>-1)},createCookie=function(n,t,i){var u,r;i?(r=new Date,r.setTime(r.getTime()+i*864e5),u="; expires="+r.toGMTString()):u="",document.cookie=n+"="+t+u+"; path=/"},saveSystemMenuPreference=function(){$("[data-name=MenuAccordion]").accordion({activate:function(n,t){_webUi.systemMenu.systemMenuActivate(n,t)}})},handleSystemMenuCloseOnClick=function(n){$.isFunction(n.target.className.indexOf)&&n.target.className.indexOf("menuhamburger")>-1||$(n.target).parents(".modal-open").length>0||$(n.target).parents(".systemmenu").length<1&&!$("#sidr").hasClass("sidr-open")&&$.sidr("close","sidr")},$(document).click(function(n){handleSystemMenuCloseOnClick(n)}),$(document).bind("touchstart",function(n){handleSystemMenuCloseOnClick(n)}),manhAdal=function(){function t(){}function r(n){var t;if(document.cookie.length>0){var f=u("UserInformation"),i=f.split("&"),r={};for(t=0;t<i.length;++t)i[t].replace(/^\s*([^=]+)=(.*)$/,function(n,t,i){r[t]=decodeURIComponent(i)});return r[n]}return""}function u(n){return document.cookie.length>0&&(c_start=document.cookie.indexOf(n+"="),c_start!=-1)?(c_start=c_start+n.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),decodeURIComponent(document.cookie.substring(c_start,c_end))):""}var n,i;return t.prototype.login=function(){if(!n)return console.error("manhAdal Error Occurred: authContext not yet initialized"),!1;var t=n.getCachedUser(),i=r("userUPN");return(t&&i&&i.toLowerCase()!=t.userName.toLowerCase()&&(this.clearCacheAndUser(),t=n.getCachedUser()),!t)?(n.login(),!1):!0},t.prototype.isSSOConfigured=function(){return window.adalConfig?!0:(console.error("Client SSO not configured"),!1)},t.prototype.refreshToken=function(){if(n&&n.config.clientId){var t=n.getCachedToken(n.config.clientId);t||(i=adalHelper.acquireToken())}},t.prototype.acquireToken=function(t){return adalHelper.isSSOConfigured()?adalHelper.login()?(n.acquireToken(n.config.clientId,function(n,r){return(t!=undefined&&t.resolve(r),i=r,n||!r)?(n="ADAL Error Occurred: "+n,console.error(n),null):i}),i):void 0:null},t.prototype.setConfig=function(){if(adalHelper.isSSOConfigured()){window.Logging.level=1,window.Logging.log=function(n){console.error(n)},n=new window.AuthenticationContext(window.adalConfig);var i=navigator.userAgent.toLowerCase().match("android")?!0:!1,t=getQueryParameter("platform");(t&&(t.toUpperCase()==="ANDROID"||t.toUpperCase()==="IOS")||i)&&(n.CONSTANTS.LOADFRAME_TIMEOUT="16000"),adalHelper.acquireToken()}},t.prototype.clearCacheAndUser=function(){n.clearCache(),n._user=null},this.adalHelper=new t,getQueryParameter=function(n,t){t||(t=window.location.href),n=n.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)"),i=r.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},setInterval(function(){adalHelper.refreshToken()},18e4),{acquireToken:adalHelper.acquireToken,setConfig:adalHelper.setConfig}}(),$(document).ready(manhAdal.setConfig),manhlogging=function(){function n(){const i=new Error("");try{const n=i.stack.split("\n")[3].split("/"),t=n[n.length-1].replace(/[)]/g,"").split(":");return{fileName:t[0],lineNumber:t[1]}}catch(r){return{fileName:null,lineNumber:null}}}function t(n){for(var i=[],r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",u=r.length,f=n||32,t=0;t<f;t++)i[t]=r.charAt(Math.floor(Math.random()*u));return i.join("")}(function(){var t=console.error;console.error=function(i){var r=n();window.onerror(i,r.lineNumber,r.fileName,null);t.apply(console,arguments)}})(),window.onerror=function(n,i,r,u,f){try{this.localStorage.getItem("loggingguid")||this.localStorage.setItem("loggingguid",t());var o={level:5,timestamp:+new Date,fileName:(i||"")+"|"+window.location.href,lineNumber:(r||"")+"|"+(u||"")+navigator.userAgent+"|"+navigator.vendor+"|"+navigator.platform+"|"+navigator.platform,message:(n||"")+"|"+(f||""),additional:this.localStorage.getItem("loggingguid")+"|"},e=new XMLHttpRequest;e.open("POST","/general/scaleapi/logsapi/log"),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("logkey","e868a2dc-c961-4fff-b8a9-9b44b41929d8"),e.send(JSON.stringify(o))}catch(s){console.warn(s)}return!1}}(),_webUi.accordion=function(){return $(function(){var t=$("#sidebar-wrapper"),n;t&&t.length>0&&(n=$("#menu-toggle"),n&&n.length>0&&n.removeClass("hidden-lg hidden-md hidden-sm hidden-xs"))}),{customizeIcons:function(){var n={header:"ui-icon-plusthick",activeHeader:"ui-icon-minusthick"};$("[data-widget=accordion]").accordion({icons:n}),$(".ui-icon-triangle-1-e").remove()},activateSubAccordion:function(n,t){var r=$("[data-name= '"+n+"']"),u=$("[data-name= '"+n+"'] h3"),f=$("Div[data-name='"+t+"']");$.each(f,function(n){var t=$(this).prev(),n=u.index(t);n===0&&(n=r.children("div").size()),t.hasClass("ui-state-active")===!1&&r.accordion("option","active",n),$("html, body").animate({scrollTop:t.offset().top-100},1e3)})},expandAllSubAccordions:function(n){var t=$("[data-name= '"+n+"']");t.children(".ui-widget-content").show(),t.children(".ui-accordion-header").addClass("ui-state-active accordion-header-active ui-corner-top").removeClass("ui-corner-all").attr("aria-selected",!0),t.children().children(".ui-accordion-header-icon").removeClass("ui-icon-plusthick").addClass("ui-icon-minusthick"),t.children().children(".ui-accordion-header-icon").removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s"),$("html, body").animate({scrollTop:0},1e3)},expandAccordionOnValidationFailure:function(){var n=[],t;$(":input.error").each(function(t,i){var u,r,f,e;i!==undefined&&$(i).closest(".ui-accordion-content")!==undefined&&$(i).closest(".ui-accordion-content")[0]!==undefined&&(u=$(i).closest(".ui-accordion-content")[0].id,u!==undefined&&(r=$("#"+u),t===0&&(n=i),r.hasClass("accordion-content-active")||(f=$(i).closest("[data-widget='accordion']"),e=r.index(".ui-accordion-content")===0?f.children("div").size():r.index(".ui-accordion-content"),f.accordion({active:e}))))}),scrollBy(0,-_webUi.fixedToTop.getScrollableContentOffset()),n!==undefined&&(t=$(n).attr("data-valtype"),t&&t==="igCombo"?setTimeout(function(){$("#"+n.name).igCombo("textInput").focus()},200):setTimeout(function(){$("#"+n.name).focus()},200))},collapseAllSubAccordions:function(n){var t=$("[data-name= '"+n+"']");t.children(".ui-widget-content").hide(),t.children(".ui-accordion-header").addClass("ui-corner-all").removeClass("ui-state-active accordion-header-active ui-corner-top").attr("aria-selected",!1),t.children().children(".ui-accordion-header-icon").removeClass("ui-icon-minusthick").addClass("ui-icon-plusthick"),t.children().children(".ui-accordion-header-icon").removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e"),$("html, body").animate({scrollTop:0},1e3)},collapseSubAccordion:function(n){var i=$("[data-resourceKey='"+n+"']"),r=i.parent(),u=r.next(),t=i.prev();t.hasClass("ui-icon-minusthick")&&(u.hide(),r.addClass("ui-corner-all").removeClass("ui-state-active accordion-header-active ui-corner-top").attr("aria-selected",!1),t.removeClass("ui-icon-minusthick").addClass("ui-icon-plusthick"),t.removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e"))}}}(),_webUi.checkedListBox=function(){return{checkedListBoxRendered:function(n,t,i,r){var f,o,u,e;if(i){if(f=t.owner.uncheckedNodes(),f)for(u=0;u<f.length;u++)o=t.owner.parentNode(f[u].element),o||t.owner.toggleCheckstate(f[u].element)}else if(r)for(u=0;u<r.length;u++)e=t.owner.nodesByValue(r[u]),e&&t.owner.toggleCheckstate(e)},nodeClicked:function(n,t){t.owner.toggleCheckstate(t.node.element,n)}}}(),_webUi.config=function(){return{ConfigValue:{},ajaxHtml:{},DelayedBinding:!1}}(),_webUi.dateRanges=function(){var r,u,f,e,o=function(n,t){r||(r=n),u||(u=t)},s=function(){f||(f=maxValue),e||(e=minValue)},t=function(n,t){var i,f=n,e,u,r;i=f.replace(/_TO/g,"_FROM"),e=$("#"+f).attr("data-controlType"),e&&e==="igDateTimeEditor"?(u=moment($("#"+i).igDateEditor("option","maxValue"),"L LTS")._d,t!==u&&(r=$("#"+i).igDateEditor("option","value"),r<t&&$("#"+i).igDateEditor("option","maxValue",t))):(u=moment($("#"+i).igDatePicker("option","maxValue"),"L LTS")._d,t!==u&&(r=$("#"+i).igDatePicker("option","value"),r<t?$("#"+i).igDatePicker("option","maxValue",t):r>t&&$("#"+f).igDatePicker("option","value",r)))},i=function(n,t){var f=n,i=f.replace(/_FROM/g,"_TO"),u=$("#"+i).attr("data-controlType"),r;u&&u==="igDateTimeEditor"?(r=moment($("#"+i).igDateEditor("option","minValue"),"L LTS")._d,t!==r&&$("#"+i).igDateEditor("option","minValue",t)):(r=moment($("#"+i).igDatePicker("option","minValue"),"L LTS")._d,t!==r&&$("#"+i).igDatePicker("option","minValue",t))},h=function(n,t,r,u){s(n,t);try{r?(dateValue=r.split("__:__ __"),dateValue&&(dateValue=moment(dateValue[0])._d,i(u,dateValue))):i(u,moment(e)._d)}catch(f){i(u,moment(e)._d)}},n=function(n,t,i){$("#"+n)&&$("#"+n).igDatePicker("option","value",new Date(i)),$("#"+t)&&$("#"+t).igTimePicker("option","value",new Date(i))};return{dateTimeRangeValueChanged:function(t,i){var h,e,r,u,s,f,o;i.newValue instanceof Date&&(s=0,i.owner.id.endsWith("FROMTIME")?(s=i.owner.id.lastIndexOf("TIME"),h=!0):i.owner.id.endsWith("TOTIME")&&(s=i.owner.id.lastIndexOf("TIME"),h=!1),f=moment(i.newValue).seconds(0).toISOString(),s>0?(u=i.owner.id,r=u.substring(0,s),h?(e=u.replace("FROMTIME","TO"),$("#"+e)?(o=moment($("#"+e).igDatePicker("option","value")).toISOString(),f>o?n(r,u,o):$("#"+r)&&n(r,u,f)):$("#"+r)&&n(r,u,f)):(e=u.replace("TOTIME","FROM"),$("#"+e)?(o=moment($("#"+e).igDatePicker("option","value")).toISOString(),f<o?n(r,u,o):$("#"+r)&&n(r,u,f)):$("#"+r)&&n(r,u,f))):(r=i.owner.id,u=r+"TIME",$("#"+u)&&n(r,u,f)))},dateRangeClearButtonClicked:function(n){var i=n.delegateTarget.id,r,f=$("#"+i).igDatePicker("option","value"),e,o,u;if(f===null||f===""){if(i.lastIndexOf("FROM")>0)r=i.replace("_FROM","_TO");else if(i.indexOf("TO")>0)r=i.replace("_TO","_FROM");else return;e=new Date(9999,1,1),o=new Date(1753,1,1),$("#"+r).igDatePicker("option","minValue",o),$("#"+r).igDatePicker("option","maxValue",e),u=$("#"+i+"TIME"),u&&u.igTimePicker("option","value",null)}},dateRangeValueChangingFROM:function(n,t){_webUi.dateRanges.processDateRangeChanging_FROM(t.owner.options.maxValue,t.owner.options.minvalue,t.newValue,t.owner.element[0].id)},dateTimeRangeValueChangedFROM:function(n,t){_webUi.dateRanges.dateTimeRangeValueChanged(n,t)},dateTimeRangeValueChangedFROMTIME:function(n,t){_webUi.dateRanges.dateTimeRangeValueChanged(n,t)},processDateRangeChanging_FROM:function(n,t,r,f){var e,s;o(n,t),r?(e=moment(r,"L LTS")._d,i(f,e)):(s=moment(u,"L LTS")._d,i(f,moment(u,"L LTS")._d))},dateRangeValueChangingTO:function(n,t){_webUi.dateRanges.processDateRangeChanging_TO(t.owner.options.maxValue,t.owner.options.minvalue,t.newValue,t.owner.element[0].id)},dateTimeRangeValueChangedTO:function(n,t){_webUi.dateRanges.dateTimeRangeValueChanged(n,t)},dateTimeRangeValueChangedTOTIME:function(n,t){_webUi.dateRanges.dateTimeRangeValueChanged(n,t)},processDateRangeChanging_TO:function(n,i,u,f){var e,s;o(n,i),u?(e=moment(u,"L LTS")._d,t(f,e)):(s=moment(r,"L LTS")._d,t(f,moment(r,"L LTS")._d))},dateTimeRangeValueChangingFROM:function(n,t){h(t.owner.options.maxValue,t.owner.options.minvalue,t.newValue,t.owner.element[0].id)},dateTimeRangeValueChangingTO:function(n,i){s(i.owner.options.maxValue,i.owner.options.minValue);try{i.newValue?(dateValue=i.newValue.split("__:__ __"),dateValue&&t(i.owner.element[0].id,moment(dateValue[0])._d)):t(i.owner.element[0].id,moment(f)._d)}catch(r){t(i.owner.element[0].id,moment(f)._d)}},todayOnlyTogged:function(n){var t,i;$("#"+n.target.id).prop("checked")?(t=$("#"+n.target.id.replace(/_TodayToggle/g,"_FROM")),t.igDateEditor("clearButton").click(),_webUi.label.UpdateInlineLabelOnBlur("",t),t.igDateEditor("option","disabled",!0),i=$("#"+n.target.id.replace(/_TodayToggle/g,"_TO")),i.igDateEditor("clearButton").click(),_webUi.label.UpdateInlineLabelOnBlur("",i),i.igDateEditor("option","disabled",!0)):(t=$("#"+n.target.id.replace(/_TodayToggle/g,"_FROM")),t.igDateEditor("option","disabled",!1),i=$("#"+n.target.id.replace(/_TodayToggle/g,"_TO")),i.igDateEditor("option","disabled",!1))},todayOnlyDatePickerToggled:function(n){var t,i;$("#"+n.target.id).prop("checked")?(t=$("#"+n.target.id.replace(/_TodayToggle/g,"_FROM")),t.igDatePicker("clearButton").click(),t.igDatePicker("option","disabled",!0),i=$("#"+n.target.id.replace(/_TodayToggle/g,"_TO")),i.igDatePicker("clearButton").click(),i.igDatePicker("option","disabled",!0)):(t=$("#"+n.target.id.replace(/_TodayToggle/g,"_FROM")),t.igDatePicker("option","disabled",!1),i=$("#"+n.target.id.replace(/_TodayToggle/g,"_TO")),i.igDatePicker("option","disabled",!1))}}}(),_webUi.dialog=function(){var n,t,u,o,f,i,e,c=function(n){_webUi.dialog.showLocatingRuleSelectionModalDialog(n).then(function(n){n&&(s(o,n.Location?n.Location:""),n.LocatedQuantity!==n.OriginalQuantity&&f&&s(f,n.LocatedQuantity),$.isFunction(e)&&e(n.Location),n.Message&&_webUi.msgManager.displayNotificationMessage({Message:n.Message,MessageType:"Warning"}))})},s=function(n,t){var i,u,r;n&&t&&(i=$("#"+n).attr("data-sourcename"),i)&&(i.indexOf(".")>-1?(u=i.split("."),r=u[0],i=u[1],_webUi.detailsScreenBinding&&_webUi.detailsScreenBinding.viewModel.model[r]&&_webUi.detailsScreenBinding.viewModel.model[r][i]&&(_webUi.editors.setInputValue($("#"+n),t),_webUi.detailsScreenBinding.viewModel.model[r][i](t))):_webUi.detailsScreenBinding&&_webUi.detailsScreenBinding.viewModel.model.hasOwnProperty(i)&&(_webUi.editors.setInputValue($("#"+n),t),_webUi.detailsScreenBinding.viewModel.model[i](t)))},l=function(n){t.resolve(n),_webUi.dialog.hideModalDialog("LocatingRuleSelectionModal")},a=function(n){var t,i;_webUi.dialog.hideModalDialog("PrintPreviewSelectionModal");var r=window.atob(n),u=r.length,f=new Uint8Array(u);for(t=0;t<u;t++)f[t]=r.charCodeAt(t);i=new Blob([f.buffer],{type:"application/pdf"}),navigator.appVersion.toString().indexOf(".NET")>0?window.navigator.msSaveOrOpenBlob(i):(newtab=window.open("about:blank","_newtab"),newtab.location=window.URL.createObjectURL(i))},h=function(n,t,i){_webUi.dialog.urlInModalLoadedAlready=!0,_webUi.helper.openAjaxLoading(),n.toLowerCase().indexOf("&modal")===-1&&(n=n+"&modal=y");var r=$("#urlModalFrame");if(r.attr("src",n),_webUi.dialog.showingUrlInModal=!0,$("#UrlModal").modal("show"),t!==undefined&&t!==null){$("#UrlModal").off("hidden.bs.modal");$("#UrlModal").on("hidden.bs.modal",i,t)}},v=function(n){var i=$("[data-widget=Grid]"),t=[];i.igGridSelection("option","multipleSelection")===!0?t=i.igGrid("widget").igGridSelection("selectedRows"):t[0]=i.igGrid("selectedRow"),t=t.filter(function(n){return n&&n.index>=0&&!n.element.hasClass("ui-iggrid-groupedrow")}),t&&t.length===1&&$.each(n,function(n,r){var u;if(n.indexOf("PrePopulateModalData_")!==-1){var o=n.split("_")[1],f=$("#"+o),e=i.igGrid("allRows").not("tr[data-grouprow=true]").index(t[0].element);e>=0&&(u=i.data("igGrid").dataSource.dataView()[e][r]),f&&(_webUi.editors.setInputValue(f,u),isNaN(u)&&(u=u.trim()));return}})},y=function(n){var t=(new jinqJs).from(n).where("Default == Y").select();t&&t.length>0&&($("#locRuleCombo").igCombo("value",t[0].Identifier),$("#locRuleSelectionModalSaveButton").hasClass("disabled")&&$("#locRuleSelectionModalSaveButton").removeClass("disabled"))},p=function(n,t,i,r,u,f,e){var o={};return o.locatingRule="",o.item=n,o.company=t,o.lot=i,o.invSts=r,o.quantity=u,o.quantityUm=f,o.currentLoc=e,o},r=function(){var n=getCookie("resourceState");n&&n==="ON"?ShowResourceKey():ShowResourceValue()},w=function(n,t){var i=[],r={};return t.length>0&&$.each(t,function(u,f){$.each(n,function(n,e){f.Identifier===e&&(r={DisplayText:t[u].DisplayText,Identifier:t[u].Identifier,Description:t[u].Description},i.push(r))})}),i};return{showingUrlInModal:!1,urlInModalLoadedAlready:!1,hideModalDialog:function(n){return n&&(n.indexOf("#")!==0&&(n="#"+n),$(n).modal("hide")),!1},locateFromLocatingRuleSelection:function(n,t,i,r,s,h,l,a,v,y){o=a,f=v,u=p(n,t,i,r,s,h,l),e=y;var w={};w.item=n,w.company=t,_httpRequest.performGet("/general/scaleapi/LocatingRuleApi?"+$.param(w),c,null,!0,!1)},printPreviewSelection:function(n){var t=null,r,u;t=n.data.internalNum?n.data.internalNum:_webUi.insightListPaneActions.getQueryString(n).internalNum,r=n.data.printProcess,r&&t?(u={},i={},i.internalNum=t,i.printProcess=r,u.storedProcedure="GetPreviewDocument",u.printProcess=r,_httpRequest.performPost("/general/scaleapi/GenericDataBindApi",u,_webUi.dialog.showPrintPreviewModalDialog,null,!0)):console.log("parameter is not passed correctly")},clickedCancelOnCompanyDialog:function(){return _webUi.dialog.hideModalDialog("CompanyModal"),n.resolve(undefined),ResourceJSPromise.then(function(){_webUi.msgManager.showError(ResourceManager.GetResource("MSG_COMPANY01",ResourceManager.ResourceType.Msg).TEXT)}),!1},clickedCancelOnLocatingRuleSelectionDialog:function(){return _webUi.dialog.hideModalDialog("LocatingRuleSelectionModal"),t.resolve(undefined),!1},clickedCancelOnPrintPreviewSelectionDialog:function(){return _webUi.dialog.hideModalDialog("PrintPreviewSelectionModal"),!1},hideUrlInModalDialog:function(n){return _webUi.dialog.hideModalDialog(n),_webUi.dialog.showingUrlInModal=!1,!1},showYesNoConfirmation:function(n,t,i,r){var u=Q.defer();return ResourceJSPromise.then(function(){var o=i?i:"CONFIRMATION",s=r?r:ResourceManager.GetResource("CONFIRMATION",ResourceManager.ResourceType.Text).TEXT,h=Handlebars.compile(yesNoConfirmationMessageTemplate),f=h({Message:n,Token:t,TitleKey:o,Title:s}),f=$("<div>"+f+"<\/div>"),e;resourceKeySwitch=="OFF"?f=ShowResourceValue(f):resourceKeySwitch=="ON"&&(f=ShowResourceKey(f)),$("#yesNoConfirmationArea").html(f),e=$("#YesNoConfirmationDialog");e.on("shown.bs.modal",function(){$("button:first",this).focus()});e.modal("show"),$("#confirmPositive").click(function(){u.resolve(!0),e.modal("hide")}),$("#confirmNegative").click(function(){u.resolve(!1),e.modal("hide")}),$(e).keypress(function(n){n.keyCode=="13"&&($("#confirmPositive").click(),n.preventDefault())})}),u.promise},showModalDialog:function(n,t,i){var r,u;if(n){n.indexOf("#")!==0&&(n="#"+n);$(n).on("shown.bs.modal",function(){$("input:text:visible:not([readonly]):first",this).focus()});if(r=$(n).find("form:first"),r&&(r.trigger("reset"),$(":input",r).not(":button, :submit, :reset").val(""),$(":input",r).not(":button, :submit, :reset").each(function(n,t){if(t.name){var i;i=$("[id="+t.name+"]"),i.data("igCombo")!=undefined&&(i.igCombo("option","selectedItems",null),i.igCombo("option","selectedIndex",-1),i.igCombo("option","activeIndex",-1),i.igCombo("option","filteringType","none"),i.igCombo("option","filteringType","local"))}}),u=r.validate({ignore:""}),u&&u.resetForm()),i&&v(i),$(n).modal("show"),t!==undefined&&t!==null)$(n).on("hidden.bs.modal",t)}},showUrlInModalDialog:function(n,t,i){n&&(_webUi.dialog.urlInModalLoadedAlready?h(n,t,i):$("#UrlInModalDiv").load("/scale/content/html/_URLInModalDialogPartial.html",function(){h(n,t,i)}))},showCompanyModalDialog:function(t,i){n=Q.defer();var u=window.location.pathname.split("/")[1].toLowerCase()==="tpm"?"/tpm/general/renderPartial?dialog=_CompanyModalDialogPartial":"/scale/general/renderPartial?dialog=_CompanyModalDialogPartial";return t&&i?(t=w(t,i),$("#CompanyInModalDiv").load(u,function(){$("#companyCombo").igCombo({width:"100%",height:"25px",allowCustomValue:!1,caseSensitive:!1,compactData:!1,dataSource:t,disabled:!1,itemTemplate:"<div class='comboTemplate'><div class='comboInfo'><span class='emphasizedText'>{{DisplayText}}<\/span><div><span class='deEmphasizedText'>{{Description}}<\/span><\/div><\/div><\/div>",locale:{placeHolder:""},highlightMatchesMode:"multi",textKey:"DisplayText",valueKey:"Identifier",mode:"editable",selectionChanged:function(){$("#companyCombo").igCombo("selectedItems")&&$("#companyCombo").igCombo("selectedItems").length>0?$("#companyModalSaveButton").removeClass("disabled"):$("#companyModalSaveButton").hasClass("disabled")||$("#companyModalSaveButton").addClass("disabled")}}),r(),_webUi.dialog.showModalDialog("CompanyModal")})):$("#CompanyInModalDiv").load(u,function(){$("#companyCombo").igCombo({dataSource:t,valueKey:"ID",width:"100%",height:"25px",locale:{placeHolder:""},selectionChanged:function(){$("#companyCombo").igCombo("selectedItems")&&$("#companyCombo").igCombo("selectedItems").length>0?$("#companyModalSaveButton").removeClass("disabled"):$("#companyModalSaveButton").hasClass("disabled")||$("#companyModalSaveButton").addClass("disabled")}}),r(),_webUi.dialog.showModalDialog("CompanyModal")}),n.promise},showPrintPreviewModalDialog:function(n){n&&($("#PrintPreviewSelectionInModalDiv")[0]===undefined&&$("body").append('<div id="PrintPreviewSelectionInModalDiv"><\/div>'),$("#PrintPreviewSelectionInModalDiv").load("/scale/general/renderPartial?dialog=_PrintPreviewModalDialogPartial",function(){$("#printPreCombo").igCombo({width:"100%",height:"25px",allowCustomValue:!1,caseSensitive:!1,compactData:!1,dataSource:n.Table,disabled:!1,itemTemplate:"<div class='comboTemplate'><div class='comboInfo'><span class='emphasizedText'>{{DisplayText}}<\/span><div><span class='deEmphasizedText'>{{Identifier}}<\/span><\/div><\/div><\/div>",locale:{placeHolder:""},highlightMatchesMode:"multi",textKey:"DisplayText",valueKey:"Identifier",mode:"editable",suppressKeyboard:!0,visibleItemsCount:"10",selectionChanged:function(){$("#printPreCombo").igCombo("selectedItems")&&$("#printPreCombo").igCombo("selectedItems").length>0?$("#printPreSelectionModalSaveButton").removeClass("disabled"):$("#printPreSelectionModalSaveButton").hasClass("disabled")||$("#printPreSelectionModalSaveButton").addClass("disabled")}}),r(),_webUi.dialog.showModalDialog("PrintPreviewSelectionModal")}))},showWorkStationModalDialog:function(n){n&&n.length>0?($("#WorkStationSelectionInModalDiv")[0]===undefined&&$("body").append('<div id="WorkStationSelectionInModalDiv"><\/div>'),$("#WorkStationSelectionInModalDiv").load("/scale/general/renderPartial?dialog=_WorkstationModalDialogPartial",function(){$("#workStationCombo").igCombo({width:"100%",height:"25px",allowCustomValue:!1,caseSensitive:!1,compactData:!1,dataSource:n,disabled:!1,itemTemplate:"<div class='comboTemplate'><div class='comboInfo'><span class='emphasizedText'>{{DisplayText}}<\/span><div><span class='deEmphasizedText'>{{Identifier}}<\/span><\/div><\/div><\/div>",locale:{placeHolder:""},highlightMatchesMode:"multi",textKey:"DisplayText",valueKey:"Identifier",mode:"editable",visibleItemsCount:"10",suppressKeyboard:!0,selectionChanged:function(){$("#workStationCombo").igCombo("selectedItems")&&$("#workStationCombo").igCombo("selectedItems").length>0?$("#workStationSelectionModalSaveButton").removeClass("disabled"):$("#workStationSelectionModalSaveButton").hasClass("disabled")||$("#workStationSelectionModalSaveButton").addClass("disabled")}}),localStorage.getItem("MachineName")!=undefined&&localStorage.getItem("MachineName")!="noworkstation"&&($("#workStationCombo").igCombo("value",localStorage.getItem("MachineName")),$("#workStationSelectionModalSaveButton").removeClass("disabled")),r(),_webUi.dialog.showModalDialog("WorkStationSelectionModal")})):_webUi.setWorkStation("noworkstation")},showLocatingRuleSelectionModalDialog:function(n){return t=Q.defer(),n&&$("#LocRulSelectionInModalDiv").load("/scale/general/renderPartial?dialog=_LocatingRuleSelectionModalDialogPartial",function(){$("#locRuleCombo").igCombo({width:"100%",height:"25px",allowCustomValue:!1,caseSensitive:!1,compactData:!1,dataSource:n,disabled:!1,itemTemplate:"<div class='comboTemplate'><div class='comboInfo'><span class='emphasizedText'>{{Identifier}}<\/span><div><span class='deEmphasizedText'>{{DisplayText}}<\/span><\/div><\/div><\/div>",locale:{placeHolder:""},highlightMatchesMode:"multi",textKey:"Identifier",valueKey:"Identifier",mode:"editable",suppressKeyboard:!0,selectionChanged:function(){$("#locRuleCombo").igCombo("selectedItems")&&$("#locRuleCombo").igCombo("selectedItems").length>0?$("#locRuleSelectionModalSaveButton").removeClass("disabled"):$("#locRuleSelectionModalSaveButton").hasClass("disabled")||$("#locRuleSelectionModalSaveButton").addClass("disabled")}}),r(),y(n),_webUi.dialog.showModalDialog("LocatingRuleSelectionModal")}),t.promise},showHelpAboutModalDialog:function(n){$("#HelpAboutInModalDiv").load(n,function(){_webUi.dialog.showModalDialog("HelpAboutDialog")})},hideModalDialogByEvent:function(n){if(n&&n.data.ModalDialogName){var t=n.data.ModalDialogName;return _webUi.dialog.hideModalDialog(t)}return!1},companySelected:function(){if($("#companyCombo").igCombo("selectedItems")&&$("#companyCombo").igCombo("selectedItems").length>0){var t=$("#companyCombo").igCombo("selectedItems")[0].data.Identifier;t||(t=$("#companyCombo").igCombo("selectedItems")[0].data.ID),n.resolve(t),_webUi.dialog.hideModalDialog("CompanyModal")}else n.resolve(undefined),_webUi.dialog.hideModalDialog("CompanyModal"),ResourceJSPromise.then(function(){_webUi.msgManager.showError(ResourceManager.GetResource("MSG_COMPANY01",ResourceManager.ResourceType.Msg).TEXT)});return!1},printPreviewSelected:function(){if($("#printPreCombo").igCombo("selectedItems")&&$("#printPreCombo").igCombo("selectedItems").length>0){var n=$("#printPreCombo").igCombo("selectedItems")[0].data.Identifier;i.documentType=n,_httpRequest.performGet("/general/scaleapi/printapi/PrintPreview?"+$.param(i),a,null,!0,!0,!0)}else _webUi.dialog.hideModalDialog("PrintPreviewSelectionModal");return!1},onWorkStationAssignment:function(){if($("#workStationCombo").igCombo("selectedItems")&&$("#workStationCombo").igCombo("selectedItems").length>0){var n=$("#workStationCombo").igCombo("selectedItems")[0].data.Identifier;_webUi.setWorkStation(n)}return!1},locatingRuleSelected:function(){if($("#locRuleCombo").igCombo("selectedItems")&&$("#locRuleCombo").igCombo("selectedItems").length>0){var n=$("#locRuleCombo").igCombo("selectedItems")[0].data.Identifier;n||(n=$("#locRuleCombo").igCombo("selectedItems")[0].data.ID),u.locatingRule=n,_httpRequest.performGet("/inventory/scaleapi/LocationInventoryApi/inventory-Located?"+$.param(u),l,null,!0,!1)}else t.resolve(undefined),_webUi.dialog.hideModalDialog("LocatingRuleSelectionModal");return!1},hideUrlInModalDialogByEvent:function(n){if(n&&n.data.ModalDialogName){var t=n.data.ModalDialogName;return _webUi.dialog.hideUrlInModalDialog(t)}return!1},showModalDialogByEvent:function(n){if(n&&n.data.ModalDialogName){var t=n.data.ModalDialogName,i=n.data;_webUi.dialog.showModalDialog(t,null,i)}}}}(),ko.bindingHandlers.modal={init:function(n,t){$(n).modal({show:!1});var i=t();if(typeof i=="boolean")$(n).on("shown.bs.modal",function(){$("input:text:visible:not([readonly]):not([disabled]):first",this).focus()});else if(typeof i=="function"){$(n).on("hide.bs.modal",function(){i(!1)});$(n).on("shown.bs.modal",function(){$(this).ready(function(){var n=$("input:text:visible:not([readonly]):not([disabled]):first",this);n&&n[0]&&n[0].focus()})})}$(n).on("keypress",function(n){_webUi.onKeyPress(n,$(this).attr("data-defaultAction"))})},update:function(n,t){var i=t();ko.utils.unwrapObservable(i)?$(n).modal("show"):$(n).modal("hide")}},ko.bindingHandlers.enterkey={init:function(n,t,i,r){var u=t();$(n).keydown(function(n){var t=n.which?n.which:n.keyCode;return t===13?(u.call(r),!1):!0})}},_webUi.editors=function(){var n=function(n,t,i){if(t){var r=String(t).indexOf("GMT");r>-1&&(n.data("datetimerange")&&n.data("datetimerange").toLowerCase()==="true"&&(i=!1),t=String(t).substring(0,r-1),i&&n.data("dateonly")&&n.data("dateonly").toLowerCase()==="true"&&(r=t.lastIndexOf(" "),r>-1&&(t=t.substring(0,r))))}return t};return{configureDateEditorEvents:function(){var n=$("[data-controlType=igDateTimeEditor]");$.each(n,function(n,t){editorId=t.id,t=$("#"+editorId),t.hasClass("blurLabel")&&t.igDateEditor({textChanged:function(n,t){_webUi.editors.dateEditorTextChanged(n,t)}})})},configureDatePickerEvents:function(){var n=$("[data-controlType=igDatePicker]");$.each(n,function(n,t){editorId=t.id,t=$("#"+editorId),t.igDatePicker({onclick:$("#ui-datepicker-div").css("display","none")}),t.hasClass("blurLabel")&&t.igDatePicker({textChanged:function(n,t){_webUi.editors.datePickerTextChanged(n,t)}})})},configureNumericEditorEvents:function(){var n=$("[data-controlType=igNumericEditor]");$.each(n,function(n,t){editorId=t.id,t=$("#"+editorId),t.hasClass("blurLabel")&&t.igNumericEditor({textChanged:function(n,t){_webUi.editors.numericEditorTextChanged(n,t)}})})},configureTextEditorEvents:function(){var n=$("[data-controlType=igTextEditor]");$.each(n,function(n,t){editorId=t.id,t=$("#"+editorId),t.hasClass("blurLabel")&&t.igTextEditor({textChanged:function(n,t){_webUi.editors.textEditorTextChanged(n,t)}})})},getInputValue:function(t,i){var u,r;return t&&(t.data("igTextEditor")!==undefined?i=t.igTextEditor("option","value"):t.data("igNumericEditor")!==undefined?i=t.igNumericEditor("option","value"):t.data("igDateEditor")!==undefined?(i=t.igDateEditor("option","value")!==""?t.igDatePicker("option","value").toUTCString():t.igDateEditor("option","value"),i=n(t,i,!1)):t.data("igDatePicker")!==undefined?(i=t.igDatePicker("option","value")!==""?t.igDatePicker("option","value").toUTCString():t.igDatePicker("option","value"),i=n(t,i,!0)):t.data("igCombo")!==undefined&&(u=t.attr("data-controltype"),u&&u==="igComboMultiSelectWithCheckBox"?i=t.igCombo("value"):(r=t.igCombo(i),r!==null&&r[0]&&(i=r[0].data[t.igCombo("option","valueKey")])))),i?$.trim(i):i},setInputValue:function(n,t){n.data("igTextEditor")!==undefined?n.igTextEditor("value",t):n.data("igNumericEditor")!==undefined&&n.igNumericEditor("value",t)},dateEditorTextChanged:function(n,t){var r=$("#"+t.owner.id),i=t.text;(i===null||i==="")&&r.hasClass("blurLabel")&&_webUi.label.UpdateInlineLabelOnBlur(n,t)},datePickerTextChanged:function(n,t){var r=$("#"+t.owner.id),i=t.text;(i===null||i==="")&&r.hasClass("blurLabel")&&_webUi.label.UpdateInlineLabelOnBlur(n,t)},numericEditorTextChanged:function(n,t){var r=$("#"+t.owner.id),i=t.text;(i===null||i==="")&&r.hasClass("blurLabel")&&_webUi.label.UpdateInlineLabelOnBlur(n,t)},textEditorTextChanged:function(n,t){var r=$("#"+t.owner.id),i=t.text;(i===null||i==="")&&r.hasClass("blurLabel")&&_webUi.label.UpdateInlineLabelOnBlur(n,t)},textEditorLookupValueChanged:function(evt,ui){if(evt&&evt.data&&evt.data.selectorId){selector=$("#"+evt.data.selectorId);var modelProperty=selector.attr("data-sourcename");modelProperty&&eval("_webUi.detailsScreenBinding.viewModel.model."+modelProperty)(selector.val())}}}}(),$(function(){if(Modernizr.touch||navigator.msMaxTouchPoints>0){var i=$(window).height(),t=jQuery("body"),r=$("#topNavigationBar").height(),n=$("#fixedTopWrapper").height(),u=r+n,f=!1,e=!1;$(window).resize(function(){$(window).height()<i?(t.addClass("removeFixedtouchdevice"),t.css({"padding-top":"0px"}),$("#scrollableContentWrapper").css({"padding-top":n+43+"px"}),$(".accordionsidebar").css({"padding-top":n+43+"px"})):(t.removeClass("removeFixedtouchdevice"),t.css({"padding-top":"43px"}),$("#scrollableContentWrapper").css({"padding-top":n+"px"}),$(".accordionsidebar").css({"padding-top":n+"px"}))})}}),_webUi.fixedToTop=function(){function n(n){var i=$("#topNavigationBar").height()+1,t=$("#fixedTopWrapper").height();$("#fixedTopWrapper").css("top",i),$(".scrollablecontent").css("padding-top",t+n),$(".accordionsidebar").css("padding-top",t+n)}return{calculateContentPaddingFromFixedTopElements:function(){n(9)},calculateResizeContentPaddingFromFixedTopElements:function(){n(-10)},getScrollableContentOffset:function(){var n=$("#topNavigationBar").height()+$("#fixedTopWrapper").height();return n+82}}}(),_webUi.Grid=function(){var r=null,d=null,g=null,nt=null,tt=-1,it=null,rt=null,ut=!1,ft=!1,et=!1,ot=!1,st=!1,o=!1,c=function(t){if(t&&t.dataSource){var i=t.dataSource.settings.sorting.expressions;n("gridSortPrefExpression",JSON.stringify(i),$(t.owner.element).attr("id"))}},f=function(n){var i,t;if(n&&n.count()!==0){for(i=n.count(),t=0;t<i;t++)if(n[t].element.attr("data-grouprow")==="true")return!0}else return!1;return!1},l=function(){var i=$('a#InsightMenuActionsDropdown[data-toggle="dropdown"]').siblings("ul").first().children("li"),n,t;$.each(i,function(n,t){$(t).addClass("disabled");var i=$(t).children("a").first();i&&$(i).prop("disabled",!0)}),n=$('a#InsightMenuPrintActionsDropdown[data-toggle="dropdown"]').siblings("ul").first().children("li"),$.each(n,function(n,t){$(t).addClass("disabled");var i=$(t).children("a").first();i&&$(i).prop("disabled",!0)}),t=$('a#InsightMenuConfigActionsDropdown[data-toggle="dropdown"]').siblings("ul").first().children("li"),$.each(t,function(n,t){$(t).addClass("disabled");var i=$(t).children("a").first();i&&$(i).prop("disabled",!0)})},n=function(n,t,i){t==null?localStorage.removeItem(r+i+n+_webSession.UserName()):localStorage[r+i+n+_webSession.UserName()]=t},t=function(n,t){return localStorage[r+t+n+_webSession.UserName()]},a=function(n){var i="#"+n.owner.element[0].id,t=$(i).closest(".scrollablecontent");return t&&t.length>0?t:t=$(i).closest(".accordionwrapper")},s=function(n,t){if(t==null)return!1;for(var i=0;i<t.length;i++)if(t[i].name===n)return!0;return!1};loadUserPreference=function(i,u){var f,s,c,o,e;r=$(u.owner.element).attr("data-screenId"),c=!1,u.element!=undefined&&u.element.attr("data-childgrid")=="true"?(f=$(u.element).attr("id"),c=!0):f=$(u.owner.element).attr("id");var a=t("gridColumnPreference",f),v=t("gridSortPreference",f),l=t("gridGroupColumnsPreference",f),y=t("areaLocalPreferencesApplied",f);a!="undefined"&&a!=null&&(o=JSON.parse(a),e=[],c?(e=u.options.columns,u.options.columns=e!=null?h(o,e):o):(e=u.owner.options.columns,u.owner.options.columns=e!=null?h(o,e):o)),s=c?u.options.features:u.owner.options.features,$.each(s,function(t,i){var u,r;if(i.name=="Sorting"&&v!="undefined"&&v!=null)s[t].columnSettings=JSON.parse(v),n("gridSortPreference",null,f);else if(i.name=="GroupBy"&&l!="undefined"&&l!=null){if(u=JSON.parse(l),!i.columnSettings){i.columnSettings=u;return}r=i.columnSettings,y==="true"&&$.each(r,function(n,t){t.isGroupBy&&t.isGroupBy===!0&&(t.isGroupBy=!1)}),$.each(u,function(n,t){var i=r.filter(function(n){return n.columnKey===t.columnKey}),u;i.length===0?r.add(t):(i[0]=$.extend(!0,i[0],t),u=i[0],r.removeItem(i[0]),r.add(u))})}else i.name==="GroupBy"&&l===undefined&&y==="true"&&$.each(i.columnSettings,function(n,t){t.isGroupBy&&t.isGroupBy===!0&&(t.isGroupBy=!1)})})};var v=function(n,t){var f=n.data("igGrid").dataSource.dataView(),u=f[t],i,r;return _webUi.Grid.activeRowId&&(i=n.igGrid("option","primaryKey"),(i==null||i.length<=0)&&(i="ig_pk"),u[i]!==_webUi.Grid.activeRowId&&(r=$.grep(f,function(n){return n[i]==_webUi.Grid.activeRowId}),r&&r.length>0&&(u=r[0]))),u},i=function(grid){var indexToSelect,evt,rowdata,querystringData;if(_webUi.Grid.groupByJustChanged)_webUi.Grid.groupByJustChanged=!1,grid.igGrid("widget").igGridSelection("clearSelection"),indexToSelect=0,_webUi.Grid.activeRowIndex=indexToSelect,_webUi.Grid.activeRowId=null,_webUi.Grid.activeRowelement=grid.igGrid("rowAt",indexToSelect),grid.igGrid("widget").igGridSelection("selectRow",indexToSelect),i(grid);else{var bindEmpty=!0,selectedRows=grid.igGrid("selectedRows"),selectedRowIndex=-1,isMultiSelect=grid.igGridSelection("option","multipleSelection"),singleSelectedRow=grid.igGrid("selectedRow");selectedRows&&selectedRows.length>0?selectedRowIndex=grid.igGrid("allRows").not("tr[data-grouprow=true]").index(selectedRows[0].element):!isMultiSelect&&singleSelectedRow&&(selectedRowIndex=grid.igGrid("allRows").not("tr[data-grouprow=true]").index(singleSelectedRow.element)),evt=_webUi.Grid.rowChangedEvtData,selectedRowIndex>=0&&evt!==undefined&&(evt&&evt.data.PostRowChanged&&$.trim(evt.data.PostRowChanged)&&(_webUi.detailPane._gridRowChangedEvent=eval(evt.data.PostRowChanged)),rowdata=v(grid,selectedRowIndex),rowdata!==undefined&&_webUi.Grid.activeRowIndex>=0&&(bindEmpty=!1,evt.data.BindDetailPaneWithGridData!==undefined&&evt.data.BindDetailPaneWithGridData==="true"?_webUi.detailPane.bindData(rowdata):(querystringData={},$.each(evt.data,function(n,t){if(n.indexOf("queryParameter_")!==-1||n.indexOf("PostData_")!==-1){var i=rowdata[t];i===undefined&&(i=t),querystringData[n.split("_")[1]]=i}}),evt.data.GETServiceURL!==undefined?_httpRequest.performGet(evt.data.GETServiceURL+$.param(querystringData),_webUi.detailPane.bindData,null,!1,!1):evt.data.POSTServiceURL!==undefined&&(evt.data.POSTServiceURL.contains("GenericDataBindApi")&&(querystringData.formId=WebUi.prototype.getCurrentFormId()),_httpRequest.performPost(evt.data.POSTServiceURL,querystringData,_webUi.detailPane.bindData,null,!0,!1))))),bindEmpty&&_webUi.detailPane!==undefined&&_webUi.detailPane.detailPaneEmptyModel!==undefined&&(_webUi.detailPane.detailPaneModel=_webUi.detailPane.detailPaneEmptyModel,_webUi.detailPane.bindData(_webUi.detailPane.detailPaneEmptyModel))}},u=function(n,t,i){var u=WebUi.prototype.getCurrentFormId(),r;sessionStorage.removeItem(u+"_"+n+"_LastSelected"),r={},r.index=t?t:0,r.page=$(n).igGridPaging("pageIndex"),r.keyValue=i?$($(n).igGrid("rows")[t]).attr("data-id"):null,sessionStorage.setItem(u+"_"+n+"_LastSelected",JSON.stringify(r,_webUi.dateReplacer))},e=function(n){for(var i=99999999,r=0,u=n.count(),t=0;t<u;t++)n[t].index<i&&(i=n[t].index,r=t);return r},y=function(n){if(_webUi.Grid.retainRowSelection||window.location.href.indexOf("selectRows")>-1){_webUi.Grid.retainRowSelection=!1;var i=WebUi.prototype.getCurrentFormId(),t=sessionStorage.getItem(i+"_"+n+"_LastSelected");if(t)return JSON.parse(t)}return null},p=function(){if(!o){o=!0;var n=WebUi.prototype.getCurrentFormId(),t=localStorage[n+"InsightGridGrouping-displayPreferenceVisible"+_webSession.UserName()];t==="false"?_webUi.insightListPaneActions.toggleGroupByButtonClicked(null):$(".groupByToggle").addClass("visiblepane")}},w=function(n,t){var e,r;if(n){var f=!1,o=!1,u=$(t).igGridGroupBy("groupByColumns").length,s=$(t).igGridPaging("pageIndex");n.keyValue&&(r=$(t).igGrid("rowById",n.keyValue),r!==null&&r!==undefined&&r.index()>-1&&(u=r.index(),o=!0,f=!0)),!o&&n.index!==null&&n.index!==undefined&&n.index>=0&&(n.page!==s?(f=!1,$(t).igGridPaging("pageIndex",n.page)):(f=!0,e=$(t).igGrid("allRows").length,n.index>=e?u=e-1:(r=$(t).igGrid("rowAt",n.index),r?u=n.index:e>0&&(u=0)))),f&&(_webUi.Grid.activeRowIndex=u,_webUi.Grid.activeRowId=null,$(t).igGrid("widget").igGridSelection("selectRow",u),i($(t)))}},h=function(n,t){return $.each(n,function(i,r){r!=null&&$.each(t,function(t,u){u!=null&&u.key===r.key&&(u.template!==undefined&&(n[i].template=u.template),u.headerText!==undefined&&(n[i].headerText=u.headerText),u.formatter!==undefined&&(n[i].formatter=u.formatter))})}),n},b=function(n){var i=n.igGrid("option","features").length,t;if(i>0)for(t=0;t<i;t++)if(n.igGrid("option","features")[t].name=="GroupBy")return!0},k=function(n,t,i){var r;if(n.length>1&&t.indexOf("GroupCount")!==-1){var u=t.substring(t.indexOf("GroupCount(")+11,t.indexOf(")")),f=[],e=[],o=[];return o=u.split("&&"),$.each(n,function(n,t){var r=$("#"+i.owner.grid.id()).igGrid("allRows").not("tr[data-grouprow=true]").index(t.element),u=i.owner.grid.dataSource.dataView()[r];f.push(u)}),r={},$.each(o,function(n,t){var u,i;e=t.trim().split(" "),u=e[0],u&&(i=[],$.each(f,function(n,t){i.push(t[u])}),i=$.unique(i),r[u]=i.length)}),_webUi.WebUi.canActionBeEnabled(u,r)}return!0};return{gridCompareDateFunc:function(n,t){var r=moment(n==null?0:n).seconds(0).toISOString(),u=moment(t==null?0:t).seconds(0).toISOString();return r===u?0:Math.sign(n-t)},gridColumnMoved:function(t,i){var r=$("#"+i.owner.grid.id());n("gridColumnPreference",JSON.stringify(r.igGrid("option","columns")),$(i.owner.element).attr("id"))},gridColumnSizeChanged:function(t,i){var r=$("#"+i.owner.grid.id());n("gridColumnPreference",JSON.stringify(r.igGrid("option","columns")),$(i.owner.element).attr("id"))},gridColumnShown:function(t,i){var r=$("#"+i.owner.grid.id());n("gridColumnPreference",JSON.stringify(r.igGrid("option","columns")),$(i.owner.element).attr("id"))},gridColumnHidden:function(t,i){var r=$("#"+i.owner.grid.id());n("gridColumnPreference",JSON.stringify(r.igGrid("option","columns")),$(i.owner.element).attr("id")),r.igGrid("autoSizeColumns")},gridHeaderRendered:function(n,i){var r=$(i.owner.element),u;s("Summaries",r.igGrid("option","features"))&&!r.hasClass("filtersummarytoggled")&&(r.addClass("filtersummarytoggled"),r.igGrid("widget").igGridSummaries("toggleSummariesRows",!1)),_webUi.WebUi.isPageLoad===!0&&s("Sorting",r.igGrid("option","features"))&&(u=t("gridSortPrefExpression",r.attr("id")),u!="undefined"&&u!=null&&(_webUi.Grid.sortJustChanged=!0,r.igGridSorting("sortMultiple",JSON.parse(u))))},gridDataBound:function(n,t){var i,r,f,u;_webUi.Grid.sortJustChanged?_webUi.Grid.sortJustChanged=!1:(i=$(t.owner.element),i&&i.igGrid("rows").length>0&&i.igGridSelection("selectedRow")!=null&&i.igGridSelection("clearSelection"),r=undefined,t.owner.dataSource._ajaxRequest&&t.owner.dataSource._ajaxRequest.responseText&&(r=$.parseJSON(t.owner.dataSource._ajaxRequest.responseText).ErrorInfo),(r===undefined||r===null)&&(f=t.owner.dataSource._recCount,u=t.owner.element.attr("data-showNoResultsMsg"),f<=0&&u&&u==="True"&&(_webUi.insightSearchPaneActions!==undefined&&_webUi.insightSearchPaneActions.returnResults!==undefined&&_webUi.insightSearchPaneActions.returnResults===!0||_webUi.WebUi.isPageLoad==!1)&&t.owner.dataSource._ajaxRequest.statusText!=="abort"&&_webUi.msgManager.showInfo(t.owner.element.attr("data-noResultsMsg"))),_webUi.WebUi.isPageLoad===!0&&(_webUi.WebUi.isPageLoad=!1),c(t))},gridEditRowStarting:function(n,t){var i=$(t.owner.element);if(t.rowID>0&&$.trim(i.attr("data-readonlyColumn"))!==""&&i.igGrid("getCellValue",t.rowID,i.attr("data-readonlyColumn"))===!0)return!1},gridEditCellStarting:function(n,t){var i=$(t.owner.element);if(t.rowAdding||$.trim(i.attr("data-editValueRequired"))!==t.columnKey){if(!t.rowAdding)return!1}else return!0},gridRowDeleting:function(n,t){var i=$(t.owner.element);if($.trim(i.attr("data-readonlyColumn"))!==""&&i.igGrid("getCellValue",t.rowID,i.attr("data-readonlyColumn"))===!0)return!1},gridRowsRendered:function(n,t){var r=!1,i=$(t.owner.element),u;$.each(i,function(n,t){var f,i,c,u,e,o;if(t&&t.rows.length>0){var s=$("#"+t.id).igGrid("option","columns"),n=-1,h=0;for(i=0;i<s.length;i++)s[i].hidden||(s[i].key==="COLOR"&&(n=h+1),h++);if(f=-1,n!=-1)for(i=0;i<t.rows.length;i++){if(t.rows[i].cells.length==2){r==!1&&(n=n+1,r=!0);continue}if(t.rows[i].cells[n]&&(c=$.trim(t.rows[i].cells[n].innerHTML),c))for(f++,u=0;u<t.rows[i].cells.length;u++)$("row-color").length>0?(e=$("row-color")[f].attributes.bg.value,o=$("row-color")[f].attributes.fg.value):(e=$("row-color").attr("bg"),o=$("row-color").attr("fg")),e&&(t.rows[i].cells[u].bgColor=e),o&&(t.rows[i].cells[u].style.color=o)}}}),u=$(t.owner.element).attr("id")+"_container",_webUi.Grid.gridRendered?navigator.userAgent.toLowerCase().indexOf("firefox")>-1?setTimeout(function(){i.igGrid("autoSizeColumns")},10):i.igGrid("autoSizeColumns"):_webUi.Grid.gridRendered=!0},gridGroupedColumnsChanged:function(i,r){var u=[],f=t("areaLocalPreferencesApplied",$(r.owner.element).attr("id"));(f===undefined||f===null)&&n("areaLocalPreferencesApplied",!0,$(r.owner.element).attr("id")),$.each(r.groupedColumns,function(n,t){u.push({isGroupBy:!0,columnKey:t.key,columnIndex:-1})}),n("gridGroupColumnsPreference",JSON.stringify(u),$(r.owner.element).attr("id")),_webUi.Grid.groupByJustChanged=!0},gridSummariesToggled:function(n,t){var i=$(t.owner.element);i.igGrid("autoSizeColumns")},modalDialogOpened:function(n,t){var i=a(t),r;t.owner._container!=undefined&&(findFunc=t.owner.container().find,t.owner.container().find=function(){var n=findFunc.apply(this,arguments);return n.length||(n=$.prototype.find.apply($(document.body),arguments)),n},i&&i.length>0&&(t.parentrow==undefined?t.owner.container().find('[id$="_modalDialog"],[id$="_movingDialog"],[id$="_dialog"]').appendTo(i):(r=$("#"+t.owner.element[0].id),r.parent().find('[id$="_modalDialog"],[id$="_movingDialog"],[id$="_dialog"]').appendTo(i))))},gridActiveRowChanged:function(n,t){var e,o,i,r;if(t.owner.activeRow()!==null&&(e="#"+t.owner.grid.id(),o=$(e).igGridGroupBy("groupByColumns").length,(t.owner.activeRow().index===o||t.owner.activeRow().index===0)&&u(e,t.owner.activeRow().index,$(e).igGrid("option","primaryKey")),_webUi.Grid.activeGridUi||(_webUi.Grid.activeGridUi=t),_webUi.Grid.activeRowelement=t.row.element,_webUi.Grid.activeRowId=t.row.id,_webUi.Grid.rowChangedEvtData=n,i=[],$("#"+t.owner.grid.id()).igGrid("widget").igGridSelection("option","multipleSelection")===!0?i=$("#"+t.owner.grid.id()).igGrid("widget").igGridSelection("selectedRows"):i[0]=$("#"+t.owner.grid.id()).igGrid("selectedRow"),i!=null&&i[0]!=null&&(i=i.filter(function(n){return n.index>=0}),f(i))))for(r=0;r<i.count();r++)i[r].element.attr("data-grouprow")==="true"&&t.owner.deselectRowById(i[r].id)},gridRowSelectionChanged:function(n,t){var c,l,o,s,a,v,r,h;if(_webUi.Grid.activeGridUi=t,c=$('a#InsightMenuActionsDropdown[data-toggle="dropdown"]').parent(),c&&c.removeClass("open"),l=$('a#InsightMenuConfigActionsDropdown[data-toggle="dropdown"]').parent(),l&&l.removeClass("open"),$("div.nav.dropdown.open").removeClass("open"),r=t.selectedRows.filter(function(n){return n.index>=0&&!n.element.hasClass("ui-iggrid-groupedrow")}),o="#"+t.owner.grid.id(),!t.selectedRows||r.count()>1&&_webUi.detailPane.detailPaneModel&&_webUi.detailPane.detailPaneModel!==_webUi.detailPane.detailPaneEmptyModel){s=e(r),u(o,$(o).igGrid("allRows").index(r[s].element),$(o).igGrid("option","primaryKey"));return}if((!_webUi.detailPane.detailPaneModel||_webUi.detailPane.detailPaneModel===_webUi.detailPane.detailPaneEmptyModel)&&r.count()>1||r.count()==1?(s=e(r),_webUi.Grid.activeRowelement=r[s].element,_webUi.Grid.activeRowIndex=$(o).igGrid("allRows").index(_webUi.Grid.activeRowelement),_webUi.Grid.activeRowId=r[s].id,u(o,_webUi.Grid.activeRowIndex,$(o).igGrid("option","primaryKey"))):r.count()==0&&(_webUi.Grid.activeRowelement=null,_webUi.Grid.activeRowIndex=-1,_webUi.Grid.activeRowId=null,a=$(o).igGridGroupBy("groupByColumns").length,u(o,a,null)),v=$(".detailpanepart"),v.is(":visible")?i($(o)):_webUi.detailPane.detailPaneModel=null,r=[],$("#"+t.owner.grid.id()).igGrid("widget").igGridSelection("option","multipleSelection")===!0?r=$("#"+t.owner.grid.id()).igGrid("widget").igGridSelection("selectedRows"):r[0]=$("#"+t.owner.grid.id()).igGrid("selectedRow"),r!=null&&r[0]!=null&&(r=r.filter(function(n){return n.index>=0}),f(r)))for(h=0;h<r.count();h++)r[h].element.attr("data-grouprow")==="true"&&t.owner.deselectRowById(r[h].id)},gridRowSelectionChanging:function(n,t){if($(t.row.element.context).closest(".ui-iggrid-rowselector-class").length>0)return $(t.row.element).attr("aria-selected")===!0?t.owner.deselectRowById(t.row.id):t.owner.selectRowById(t.row.id),!1},loadDetailPaneOnToggle:function(){i($("[data-widget=Grid]"))},deSelectAllSelectedRows:function(n){var t=[],i,r;if(n.igGridSelection("option","multipleSelection")===!0?t=n.igGrid("widget").igGridSelection("selectedRows"):t[0]=n.igGrid("selectedRow"),t&&t.length>0)for(i=0,r=t.length;i<r;i++)n.igGrid("widget").igGridSelection("deselectRow",t[i].index)},detailsGridRendered:function(n){$.each(n.data,function(n,t){n.indexOf("EnableAction_")!=-1&&(_webUi.WebUi.canActionBeEnabled(t,_webUi.detailsScreenBinding.entityInJsonFormat)===!0?($("#"+n.split("_")[1]).prop("disabled",!1),$("#"+n.split("_")[1]).closest("li").removeClass("disabled")):($("#"+n.split("_")[1]).prop("disabled",!0),$("#"+n.split("_")[1]).closest("li").addClass("disabled")))})},gridUpdatingDataDirty:function(n,t){return $("#"+t.owner.grid.id()).igGrid("commit"),!1},AddResourceDataAttributes:function(){$(".ui-iggrid-headertext").each(function(){var t=$(this).attr("data-ResourceKey");if(typeof t==typeof undefined||t===!1){var r=$(this).closest("th").attr("id"),i=r.split(/_(.+)?/)[1],n=$(this).text();$(this).closest("table").attr("data-controltype")=="VerticaligGrid"?$(this).closest("table").find("tbody tr").each(function(){var t=$(this).find("td");t.each(function(t){t==0&&$(this).text()==n&&_webUi.Grid.AddDataResourceAttributesToSpecificElement($(this),i,n)})}):_webUi.Grid.AddDataResourceAttributesToSpecificElement($(this),i,n)}})},AddDataResourceAttributesToSpecificElement:function(n,t,i){n.attr("data-ResourceKey",t),n.attr("data-ResourceValue",i)},enableCommitActionForEditableGrid:function(n){if(n.data.CommitSelector!==undefined){var i=$(n.data.CommitSelector);i.removeClass("disabled")}},loadDefaults:function(){var t=$("[data-widget=Grid]"),e="#"+t.igGrid("id"),r,u,f;b(t)&&(t.igGridGroupBy("option","initialExpand",!1),p()),r=t.attr("clearSelection"),(r===undefined||r==="true")&&_webUi.Grid.pageJustChanged===!0&&t.igGrid("widget").igGridPaging("option","type")==="remote"&&t.igGrid("widget").igGridSelection("clearSelection"),_webUi.Grid.lastActiveRowIndex>0&&t.igGrid("totalRecordsCount")>=_webUi.Grid.lastActiveRowIndex?(t.igGrid("widget").igGridSelection("selectRow",_webUi.Grid.lastActiveRowIndex),_webUi.Grid.activeRowIndex=_webUi.Grid.lastActiveRowIndex,_webUi.Grid.activeRowId=null,_webUi.Grid.lastActiveRowIndex=-1):(u=t.attr("data-loadDefaults"),(u===undefined||u==="true")&&(f=y(e),!_webUi.Grid.pageJustChanged&&f?w(f,e):(_webUi.Grid.activeRowIndex=0,_webUi.Grid.activeRowId=null,t.igGrid("widget").igGridSelection("selectRow",_webUi.Grid.activeRowIndex)))),i(t),_webUi.Grid.pageJustChanged=!1},gridrendering:function(n,t){loadUserPreference(n,t)},pageIndexChanged:function(n,t){_webUi.Grid.pageJustChanged=!0;var i=$(t.owner.element);i.igGrid("autoSizeColumns")},gridDataRendered:function(n,t){if(setTimeout(function(){var n=$(t.owner.element);n.igGrid("autoSizeColumns")},10),navigator.userAgent.toLowerCase().indexOf("firefox")>-1){var i=$(t.owner.element).data("igGrid");i.container().hide(),setTimeout(function(){i.container().show()},0)}},refreshData:function(){var n=$("[data-widget=Grid]"),r,t,i,u,f;n&&n.length>0&&(_webUi.Grid.retainRowSelection=!0,r=n.igGridPaging("pageIndex"),t=[],n.igGridSelection("option","multipleSelection")===!0?t=n.igGridSelection("selectedRows"):t[0]=n.igGrid("selectedRow"),i=e(t),i&&(u=t[i].element,f=n.igGrid("allRows").index(_webUi.Grid.activeRowelement),_webUi.Grid.deSelectAllSelectedRows(n),_webUi.Grid.activeRowelement=u,_webUi.Grid.activeRowIndex=f,_webUi.Grid.activeRowId=t[i].id),n.data("igGrid")._loadingIndicator.show(),n.igGridPaging("pageIndex",r)),_webUi.Grid.strikeThroughGridData()},numericColumnGroupSeparatorFormatter:function(n){return n==null?n:n.toString().replace($.ig.regional.defaults.numericGroupSeparator,"")},replaceWhiteSpacesFormatter:function(n){return _webUi.helper.replaceWhiteSpacesFormatter(n)},strikeThroughGridData:function(){var n=$("[data-widget=Grid]");$.each(n,function(n,t){var r,u,o,s,i,f,e;if(t&&$(t).data("igGrid")!==null&&$(t).data("igGrid")!==undefined&&t.rows.length>0&&(r=$("#"+t.id).igGrid("columnByKey","IN_DELETION"),u=$("#"+t.id).igGrid("columnByKey","IN_CANCELLATION"),(r!=null||u!=null)&&(o=$("#"+t.id).data("igGrid").dataSource.dataView().count(),o>0)))for(s=!0,i=0;i<o;i++)(f=$(t.rows[i]),f.attr("data-grouprow")!="true")&&f&&f.attr("data-id")&&($("#"+t.id).igGrid("findRecordByKey",f.attr("data-id"))&&(s=!1),e=s?Number(f.attr("data-id")):f.attr("data-id"),r!=null&&r.dataType=="bool"&&($("#"+t.id).igGrid("getCellValue",e,r.key)==!0||r.hidden==!0&&$("#"+t.id).data("igGrid").dataSource.dataView()[i][r]==!0)&&$(t.rows[i]).addClass("strike"),u!=null&&u.dataType=="bool"&&($("#"+t.id).igGrid("getCellValue",e,u.key)||u.hidden==!0&&$("#"+t.id).data("igGrid").dataSource.dataView()[i][u]==!0)==!0&&$(t.rows[i]).addClass("strike"))})},fillGridRequiredColumnsOnAddRow:function(n,t){var u=$("#"+t.owner.grid.id()),i=u.attr("data-defaultinsertbinding"),r;i&&(r=JSON.parse(i),$.each(r,function(n,i){t.values[i.column]=_webUi.detailsScreenBinding.viewModel.model[i.binding]()}))},generateGridPrimaryKeyValueOnAddRow:function(n,t){var i=$("#"+t.owner.grid.id()),r=i.igGrid("pendingTransactions");t.value=0-r.length},modifyActionsBasedOnSelection:function(n,t){var i,r;if(!t||!n){n||l();return}i=[],$("#"+t.owner.grid.id()).igGrid("widget").igGridSelection("option","multipleSelection")===!0?i=$("#"+t.owner.grid.id()).igGrid("widget").igGridSelection("selectedRows"):i[0]=$("#"+t.owner.grid.id()).igGrid("selectedRow"),i=i.filter(function(n){return n.index>=0}),r=f(i),$.each(n,function(n,u){var f=!0,e;if(i.count()==0||t.owner.grid.dataSource.dataView().count()==0||r)f=n.indexOf("EnableAction_")!==-1&&u==="true";else if(n.split("_")[2]!==undefined)f=_webUi.insightListPaneActions.canActionbeEnabled(n,u)?!0:!1;else if(n.indexOf("EnableAction_")!==-1)e=$("#"+n.split("_")[1]).attr("data-allowOnMultiSelect"),i.count()>1&&(!e||e==="false")&&(f=!1),f&&(f=k(i,u,t)),u.indexOf("GroupCount")!==-1&&(u=u.substring(0,u.indexOf("GroupCount")).trim(),u=u.substring(0,u.length-2)),$.each(i,function(n,i){var e=$("#"+t.owner.grid.id()).igGrid("allRows").not("tr[data-grouprow=true]").index(i.element),r;e>=0&&f===!0&&(r=t.owner.grid.dataSource.dataView()[e],f&&r&&(f=f&&_webUi.WebUi.canActionBeEnabled(u,r)===!0))});else return;f===!0?($("#"+n.split("_")[1]).prop("disabled",!1),$("#"+n.split("_")[1]).closest("li").removeClass("disabled")):($("#"+n.split("_")[1]).prop("disabled",!0),$("#"+n.split("_")[1]).closest("li").addClass("disabled"))})},saveChanges:function(n,t,i,r){var u=$("[data-editable=True]"),e=u.length,f=1;$.each(u,function(){var o=$(this).igGrid("pendingTransactions");$.each(o,function(){$(this)[0].rowId<0&&($(this)[0].rowId=0)}),$(this).igGrid("commit"),f===e?$(this).igGrid("saveChanges",n,i):$(this).igGrid("saveChanges",null,t),f++}),r!=null&&u!=null&&u.length==0&&r.resolve()},getSelectedRowsForMultiSelect:function(n){var t=n.igGrid("selectedRows").filter(function(n){return n.index>=0&&!n.element.hasClass("ui-iggrid-groupedrow")});return t&&t.sort(function(n,t){return n.index-t.index}),t}}}(),_webUi.handlebars=function(){return{getCompiledText:function(n,t){var r=Handlebars.compile(n),i=r(t);return i=i.replace(new RegExp("&#x27;","g"),"'"),i=i.replace(new RegExp("&quot;","g"),'"')}}}(),_webUi.helper=function(){window.setInterval(function(){n()},5e3);var n=function(){if(WebSession.prototype.UserName()!=undefined&&WebSession.prototype.UserName().length>0)$("#currentEnvironmentVal")[0]!=undefined&&$("#currentEnvironmentVal").text()!==WebSession.prototype.Environment()?window.location.reload():decodeURIComponent(WebSession.prototype.CurrentWhs())!==$("#currentWhsVal").text()&&(window.location.href.indexOf("/monitors/")>0?window.location.reload():$("#currentWhsVal").text(decodeURIComponent(WebSession.prototype.CurrentWhs())));else{var n="/SCALE/Security/error?ResourceKey=MSG_SIGNOUT01",t=_webUi.helper.getQueryParameter("platform");t&&t.length>0&&(n=n+"&platform="+t),window.location=n}},t=function(n,t){return n+=n.indexOf("?")<0?"?"+decodeURIComponent($.param(t)):"&"+decodeURIComponent($.param(t))},i=function(n){$("#"+n).parent().siblings(".lookupfilterbutton").children().attr("disabled","disabled")},r=function(n){$("#"+n).parent().siblings(".lookupfilterbutton").children().removeAttr("disabled")};return{setQueryParameter:function(n,i){return t(n,i)},getRelativeUrlFromAbsoluteUrl:function(n){return n?"/"+n.replace(/^(?:\/\/|[^\/]+)*\//,""):n},localeFormatNumber:function(n,t){var r=$.ig.formatter(1.1).substring(1,2),i=n.toFixed(t);return i=i.replace(".",r)},getQueryParameter:function(n,t){t||(t=window.location.href),n=n.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)"),i=r.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},refreshUrlInCurrentTabWithPost:function(n,t){n!==null&&t!==undefined&&_httpRequest.openUrlInCurrentTabWithPost(n,t)},removeHashToggleFromUrl:function(n){if(n){var t=n.lastIndexOf("#");if(t>-1)return n.substring(0,t)}return n},removeQueryParamFromUrl:function(n,t){var u=n.split("?"),i,r,f;if(u.length>=2){for(i=u[1].split(/[&;]/g),r=i.length;r-->0;)i[r].lastIndexOf(t+"=",0)!==-1&&i.splice(r,1);return f=u[0]+(i.length>0?"?"+i.join("&"):"")}return n},removeAllQueryParamsFromUrl:function(n){if(n){var t=n.split("?");return t[0]}return n},replaceWhiteSpacesFormatter:function(n){return n&&isNaN(n)?n.replace(/\s/g,"&nbsp;"):n===null?"":n},openAjaxLoading:function(){document.getElementById("ajaxloadingmodal").style.display="block",document.getElementById("ajaxloadingfade").style.display="block"},closeAjaxLoading:function(){document.getElementById("ajaxloadingmodal").style.display="none",document.getElementById("ajaxloadingfade").style.display="none"},equals:function(n,t){return!n&&!t||n===t},mutationObservable:function(n){var t=!1;n.forEach(function(n){n.attributeName==="aria-disabled"&&(t=!0,i(n.target.id))}),t||r(n[0].target.id)}}}(),_webUi.hyperlink=function(){return{bindHyperlink:function(n,t,i){var u,r,f;control=$("#"+n),control!=null&&control.length>0&&(u="",r=$("#"+n+"hrefTemplate"),r!==undefined&&$.trim(r.html())&&(u=_webUi.handlebars.getCompiledText(r.html(),i)),f="",r=$("#"+n+"onclickTemplate"),r!==undefined&&$.trim(r.html())&&(f=_webUi.handlebars.getCompiledText(r.html(),i)),control.text(t),$.trim(u)?control.attr("href",u).css({cursor:"auto","pointer-events":"auto"}):control.attr("href","").css({cursor:"pointer","pointer-events":"none"}),$.trim(f)&&control.attr("onclick",f))}}}(),_webUi.igControls=function(){return{setDisplayState:function(n,t){if(n.data("igDatePicker")){var i;i=t==="enable"?!0:!1,n.igDatePicker("option","disabled",!i)}},updateIGComboDatasource:function(n,t,i,r){var u=[],e,f;r&&t&&(n&&t&&n.length>0?(e=null,$.each(n,function(n,i){$.each(t,function(n,r){(r.Identifier===i||r.Identifier===i.ID)&&u.push(t[n])})})):u=t,f=$(r).igCombo({dataSource:u}),f&&f.igCombo("value",i))}}}(),_webUi.image=function(){return{bindImage:function(n,t){var i=$("img[data-bind$="+n.replace("$","")+"]");t===""||t==="image:"?i.css({display:"none"}):(i.attr("src",t),i.css({display:"block"}))}}}(),indicatorTiles=[],_webUi.indicatortile=function(){function n(n,t,i,r,u){return{storedProcedure:n,filterCriteria:t,indicatorTileName:i,cautionCriteria:r,warningCriteria:u}}function t(n){_webUi.insightSearchPaneActions.fillListPaneSummaryTiles(n)}return{PostSuccessCallback:function(n,i,r,u){var f=r.responseJSON.IndicatorTile;typeof f!="undefined"&&(t(f[0]),!f[0].CAUTION||f[0].CAUTION.toUpperCase()!=="TRUE"||f[0].WARNING&&f[0].WARNING.toUpperCase()==="TRUE"||$("#"+u.parentDivId).removeClass(u.cssClass).addClass(u.cssClass+"Caution"),f[0].WARNING&&f[0].WARNING.toUpperCase()==="TRUE"&&$("#"+u.parentDivId).removeClass(u.cssClass).addClass(u.cssClass+"Warning"))},getIndicatorTile:function(t,i){i!==!0&&indicatorTiles.push(t);var r=new Date,u=t.filterCriteria+", TIMEZONE_OFFSET="+r.getTimezoneOffset()+";";t.url&&_httpRequest.performPost(t.url,n(t.storedProcedure,u,t.indicatorTileName,t.cautionCriteria,t.warningCriteria),function(n,i,r){_webUi.indicatortile.PostSuccessCallback(n,i,r,t)},null,!0)}}}(),_webUi.label=function(){var t=function(n,t,u){var h,f,c,s,a,l,e,o;h=t.owner!==undefined?t.owner.id:t.attr("id"),f=$("#"+h),h!==null&&h!==undefined&&h.indexOf("SearchPaneAdvCrit")===-1?(c=f.attr("data-controlType"),o=!1,$.isFunction(f.igTextEditor)&&c==="igNumericEditor"?(e=f.igNumericEditor("option","placeHolder"),s=f.igNumericEditor("displayValue"),o=f.igNumericEditor("option","disabled")):$.isFunction(f.igDateEditor)&&c==="igDateTimeEditor"?(e=f.igDateEditor("option","placeHolder"),s=f.igDateEditor("value"),o=f.igDateEditor("option","disabled")):$.isFunction(f.igDatePicker)&&c==="igDatePicker"?(e=f.igDatePicker("option","placeHolder"),s=f.igDatePicker("value"),o=f.igDatePicker("option","disabled")):$.isFunction(f.igTextEditor)&&c==="igTextEditor"?(e=f.igTextEditor("option","placeHolder"),s=f.igTextEditor("value"),o=f.igTextEditor("option","disabled")):$.isFunction(f.igTimePicker)&&c==="igTimePicker"?(e=f.igTimePicker("option","placeHolder"),s=f.igTimePicker("value"),o=f.igTimePicker("option","disabled")):$.isFunction(f.igCombo)&&(e=f.igCombo("option","locale").placeHolder,s=f.igCombo("value"),o=f.igCombo("option","disabled")),e&&u&&o===!1?i(h,e):e&&(s===null||s===""||s.length===0)&&r(h,e)):$.isFunction(f.igCombo)&&t.attr("class")==="ui-igcombo-field ui-corner-all blurLabel"&&(n!==undefined?l=f:(a=t.parent().next("input").attr("name"),l=$("#"+a)),$.isFunction(l.igCombo)&&(e=l.igCombo("option","locale").placeHolder,o=l.igCombo("option","disabled"),e&&u&&o===!1?i(a,e):e&&l.igCombo("value").length==0&&r(a,e)))},n=function(n){n.hasClass("hideemptydiv")&&$(n).hide()},u=function(n){$(n).show()},i=function(n,t){var i=$("label[for='"+n+"']");i&&(i.text()===null||i.text().trim()==="")&&i.hasClass("LabelInline")&&(i.removeClass("LabelInline").addClass("LabelTop"),i.text(t))},r=function(n){var t=$("label[for='"+n+"']");t!==null&&t!==undefined&&(t.text()!==null||t.text().trim()!=="")&&t.hasClass("LabelTop")&&(t.removeClass("LabelTop").addClass("LabelInline"),t.text(""))};return{bindLabel:function(t,i){var r=$("label[data-bind$="+t.replace("$","")+"]"),f=$(r).parent(),e;r.hasClass("TileData")>0&&i!=null?(e=_webUi.summarytile.getTileValue(i),r.text(e),r.attr("percentage")&&JSON.parse(r.attr("percentage").toLowerCase())&&r.text(e+"%")):i!==null&&i!==""?((r.attr("data-format")=="dateTime"||r.attr("data-format")=="date")&&i!=""?r.text($.ig.formatter(new Date(i),"string",r.attr("data-format"))):(r.text(i),r.html(_webUi.helper.replaceWhiteSpacesFormatter(i))),u(f)):i===null?(r.text(""),n(f)):i===""&&n(f)},bindOriginalValue:function(n,t){var i=$("label[data-bind$="+n.replace("$","")+"]");i.attr("orignalValue",t)},hideAllEmptyLabels:function(){$("label").each(function(){var t=$(this).text();$.trim(t)||n($(this).parent())})},UpdateInlineLabelOnFocus:function(n,i){var r;r=i===undefined?$(this):i,t(i,r,!0)},UpdateInlineLabelOnBlur:function(n,i){var r;r=i===undefined?$(this):i,t(i,r,!1)}}}(),_webUi.LocalStorage=function(){return{setLocalStorage:function(n,t,i,r){localStorage[n+t+i+_webSession.UserName()]=r},getLocalStorage:function(n,t,i){return localStorage[n+t+i+_webSession.UserName()]}}}(),lookup=function(){var n;n=window.location.pathname.split("/")[1].toLowerCase()==="tpm"?"/tpm/trans/tpmlookup?formId=40020&recordType=":"/scale/trans/lookup?formId=4018&recordType=";var i="editorId",r="editorIddbColumnName",u="onSuccessCallBack",t=function(t,i,r,u){var h,e,f,o,s;editorInfo=u,r&&editorInfo&&editorInfo.length>0&&(h={selectorId:editorInfo[0].editorId},i&&(e=i.indexOf("#")>-1?$(i):$("#"+i)),f=n+r,f=_webUi.helper.setQueryParameter(f,{passedWhsVal:e?_webUi.editors.getInputValue(e,null):""}),f=_webUi.helper.setQueryParameter(f,{passedWhsFld:e?e.attr("data-dbcolumn"):""}),o=editorInfo[0].defaultSearchParameter,s=editorInfo[0].defaultSearchControl,f=_webUi.helper.setQueryParameter(f,{defaultSearchParameter:o?o:""}),f=_webUi.helper.setQueryParameter(f,{defaultSearchControl:s?s:""}),_webUi.dialog.showUrlInModalDialog(f,t,h))};return{render:function(n,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it){var rt=[];rt.push({editorId:u,editorIddbColumnName:f}),rt.push({editorId:e,editorIddbColumnName:o}),rt.push({editorId:s,editorIddbColumnName:h}),rt.push({editorId:c,editorIddbColumnName:l}),rt.push({editorId:a,editorIddbColumnName:v}),rt.push({editorId:y,editorIddbColumnName:p}),rt.push({editorId:w,editorIddbColumnName:b}),rt.push({editorId:k,editorIddbColumnName:d}),rt.push({editorId:g,editorIddbColumnName:nt}),rt.push({editorId:tt,editorIddbColumnName:it}),t(n,i,r,rt)},renderWithArrayParams:t,getControlsName:function(){return editorInfo}}}(),_webUi.lot=function(){return{getDefaultLotAndExpirationDate:function(n,t,i){var r,u;return(i===""||i===null)&&(i=0),u="/general/scaleapi/LotApi/Get-Default-Lot?lotTemplateValue="+encodeURIComponent(n)+"&daysToExpire="+i+"&wareHouse="+encodeURIComponent(t),_httpRequest.performGet(u,function(n){r=n},null,!0,!1),r}}}(),_webUi.MiniGrid=function(){var n={},t=function(n,t,i,r){var u=$("#"+n);u.attr("data-controlType")=="igHierarchicalGrid"?_webUi.MiniGrid.bindHierarchicalGrid(n,t,i[n+"Headertext"],r):u.attr("data-controlType")=="igGrid"&&_webUi.MiniGrid.bindMiniGrid(n,t,i[n+"Headertext"])};return{gridModel:null,gridHeirarchicalGridHeader:null,applyHeaderFormat:function(n,t){$.each(t,function(t,i){n.columns!=undefined&&$.each(n.columns,function(n,t){t.headerText==i.headerText&&i.hasOwnProperty("format")&&(t.format=i.format)})}),n.columnLayouts!=undefined&&n.columnLayouts.length>0&&_webUi.MiniGrid.applyHeaderFormat(n.columnLayouts,t)},gridActiveRowChanged:function(n,t){var i,r;_webUi.Grid.activeGridUi=null,_webUi.Grid.rowChangedEvtData=n,i=$("#"+t.owner.grid.id()).igGrid("allRows").not("tr[data-grouprow=true]").index(t.row.element),i>=0?(r=t.owner.grid.dataSource.dataView()[i],r!="undefined"&&t.row.index>=0&&$.each(n.data,function(n,t){n.indexOf("EnableAction_")!=-1&&(_webUi.WebUi.canActionBeEnabled(t,r)?($("#"+n.split("_")[1]).prop("disabled",!1),$("#"+n.split("_")[1]).closest("li").removeClass("disabled")):($("#"+n.split("_")[1]).prop("disabled",!0),$("#"+n.split("_")[1]).closest("li").addClass("disabled")))})):(_webUi.detailPane.detailPaneEmptyModel!=undefined&&(_webUi.detailPane.detailPaneModel=_webUi.detailPane.detailPaneEmptyModel,_webUi.detailPane.bindData(_webUi.detailPane.detailPaneEmptyModel)),$.each(n.data,function(n){n.indexOf("EnableAction_")!=-1&&($("#"+n.split("_")[1]).prop("disabled",!0),$("#"+n.split("_")[1]).closest("li").addClass("disabled"))}))},bindData:function(n,i){n!=null&&(_webUi.MiniGrid.gridModel=n,$.each(n,function(r,u){try{if(u.constructor==Array&&r.indexOf("ScalarData")>=0&&u[0]!=undefined)$.each(u[0],function(n,t){_webUi.label.bindLabel(n,t)});else if(u.constructor!=Array||r.indexOf("Headertext")>=0)if(r.indexOf("Headertext")>=0||$("img[data-bind$="+r.replace("$","")+"]").length!=1){if(!(r.indexOf("Headertext")>=0)){var e=!1,f=$("a[data-bind$="+r+"]");f&&f.length>0&&(e=!0),e?$.each(f,function(t,i){_webUi.hyperlink.bindHyperlink(i.id,u,n)}):(_webUi.label.bindOriginalValue(r,u),_webUi.label.bindLabel(r,u))}}else _webUi.image.bindImage(r,u);else t(r,u,n,i)}catch(o){alert("Error in bindData"+o)}}))},updateHeaderText:function(n,t){var i=_webUi.MiniGrid.gridModel[n.currentTarget.id+"Headertext"];i!=undefined&&(i=_webUi.MiniGrid.gridModel[n.currentTarget.id+"Headertext"],t.element.data("igGrid").headersTable().find("span.ui-iggrid-headertext").each(function(){var n=$(this).html(),r;i[n]&&(i[n].headerText!=undefined&&i[n].hidden==!0?t.element.igGrid("hideColumn",n):i[n].headerText!=undefined&&(_webUi.Grid.AddDataResourceAttributesToSpecificElement($(this),i[n].key,i[n].headerText),r=getCookie("resourceState"),r=="ON"?$(this).html(i[n].key):$(this).html(i[n].headerText)))}))},bindHierarchicalGrid:function(t,i,r,u){var f=$("#"+t),o=!0,e,s;if(u==null||u.enableColumnMoving==null||u.enableColumnMoving||(o=u.enableColumnMoving),f.data("igGrid")!=null&&f.igHierarchicalGrid("destroy"),_webUi.MiniGrid.gridHeirarchicalGridHeader=r,i.length>0&&!$.isEmptyObject(i[0])){f.igHierarchicalGrid({alternateRowStyles:!1,autoFormat:"dateandnumber",rendering:function(n,t){_webUi.Grid.gridrendering(n,t)},rendered:function(n,t){_webUi.Grid.modalDialogOpened(n,t)},features:[{name:"Resizing",allowDoubleClickToResize:!0,inherit:!0,columnResized:function(n,t){_webUi.Grid.gridColumnSizeChanged(n,t)}},{name:"Sorting",type:"local",mode:"multiple",inherit:!0},{name:"Hiding",inherit:!0,columnHidden:function(n,t){_webUi.Grid.gridColumnHidden(n,t)},columnShown:function(n,t){_webUi.Grid.gridColumnShown(n,t)}},{name:"ColumnMoving",inherit:!0,columnMoved:o?function(n,t){_webUi.Grid.gridColumnMoved(n,t)}:null},{name:"Selection",mode:"row",multipleSelection:!1},{name:"Paging",type:"local",pageSize:10,showFirstLastPages:!1,showPageSizeDropDown:!1,inherit:!0}],childGridRendered:function(n,t){_webUi.Grid.modalDialogOpened(n,t)},dataSource:i,dataBound:function(n,t){_webUi.Grid.gridDataBound(n,t)},autoGenerateLayouts:!0,headerRendering:function(n,t){_webUi.MiniGrid.applyHeaderFormat(t.owner.options,_webUi.MiniGrid.gridHeirarchicalGridHeader)}});f.on("igchildgridcreating",_webUi.Grid.gridrendering);f.off("igchildgridcreated");f.on("igchildgridcreated",_webUi.MiniGrid.updateHeaderText);e=r,s=f.igGrid("headersTable").find("thead").find("span.ui-iggrid-headertext").html(),e[s]!=undefined&&f.igGrid("headersTable").find("thead").find("span.ui-iggrid-headertext").each(function(){var i=$(this).html();e[i]&&(e[i].template!=undefined&&f.igGrid("setColumnTemplate",i,e[i].template,!0),e[i].headerText!=undefined&&e[i].hidden==!0?((n[t+i]===undefined||n[t+i]!==!1)&&(n[t+i]=!1),f.igGrid("hideColumn",i,function(){n[t+i]=!0})):e[i].headerText!=undefined&&$(this).html(e[i].headerText))})}},bindDataForVariableColulmnGrid:function(n){_webUi.MiniGrid.bindData(n,{enableColumnMoving:!1})},bindMiniGrid:function(n,t,i){var r=$("#"+n);r.data("igGrid")!=null&&r.igGrid("destroy"),t.length>0&&!$.isEmptyObject(t[0])&&(r.igGrid({featureChooserIconDisplay:"desktopOnly"}),r.igGrid({alternateRowStyles:!1,autoFormat:"dateandnumber",rendering:function(n,t){_webUi.Grid.gridrendering(n,t)},rendered:function(n,t){_webUi.Grid.modalDialogOpened(n,t)},features:[{name:"Hiding",columnHidden:function(n,t){_webUi.Grid.gridColumnHidden(n,t)},columnShown:function(n,t){_webUi.Grid.gridColumnShown(n,t)}},{name:"Sorting",type:"local",mode:"multiple"},{name:"ColumnMoving",columnMoved:function(n,t){_webUi.Grid.gridColumnMoved(n,t)}},{name:"Selection",mode:"row",multipleSelection:!1},{name:"Paging",type:"local",pageSize:10,showPageSizeDropDown:!1},{name:"Resizing",allowDoubleClickToResize:!0,columnResized:function(n,t){_webUi.Grid.gridColumnSizeChanged(n,t)}}],dataSource:t,dataBound:function(n,t){_webUi.Grid.gridDataBound(n,t)}}).igGrid("renderMultiColumnHeader",i))}}}(),_webUi.msgManager=function(){return{showSuccess:function(n,t,i){n.contains("\n")&&(n=n.replace("\n","<\/br>")),toastr.success(n,t,{closeButton:!1,debug:!1,positionClass:"toast-top-full-width",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"4000",extendedTimeOut:"2000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut",onHidden:i}),$("#toast-container").css("top",$("nav:first").height())},showErrorWithSound:function(n,t,i){this.showError(n,t,null,i),this.audio.play()},showError:function(n,t,i,r){toastr.error(n,t,{closeButton:!0,debug:!1,positionClass:"toast-top-full-width",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"0",extendedTimeOut:"0",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut",onHidden:r}),$("#toast-container").css("top",$("nav:first").height())},audio:new Audio("/scale/content/manh/sound/error.mp3"),showInfo:function(n,t){toastr.info(n,t,{closeButton:!1,debug:!1,positionClass:"toast-top-full-width",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"4000",extendedTimeOut:"2000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}),$("#toast-container").css("top",$("nav:first").height())},showWarning:function(n,t,i){toastr.warning(n,t,{closeButton:!0,debug:!1,positionClass:"toast-top-full-width",showDuration:"300",hideDuration:"1000",timeOut:"0",extendedTimeOut:"0",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut",onHidden:i}),$("#toast-container").css("top",$("nav:first").height())},displayNotificationMessage:function(n,t){if(n&&$.trim(n.Message)){var i=$.trim(n.MessageType);i&&i!=="Success"?i==="Error"&&_webUi.msgManager.showError(n.Message):_webUi.msgManager.showSuccess(n.Message,null,t),i==="Warning"?_webUi.msgManager.showWarning(n.Message,null,t):i==="Info"&&_webUi.msgManager.showError(n.Message)}}}}(),_webUi.navigationHeader=function(){var r=_webSession.UserName()+_webSession.Environment()+"homePage",n=function(n,t,i){t.is(":visible")&&($.each(i,function(n,i){t.hasClass(i)&&t.toggleClass(i)}),t.hasClass(n)==!1&&t.toggleClass(n))},u=function(){return $(".listpanepart").is(":visible")?$(".listpanepart"):$(".detailpanepart").is(":visible")?$(".detailpanepart"):$(".searchpanepart")},f=function(n){var t=[];return $(".detailpanepart").hasClass("col-lg-1")||$(".listpanepart").hasClass("col-md-2")?n.attr("id")==$(".listpanepart").attr("id")&&($(".detailpanepart").is(":visible")&&$(".searchpanepart").is(":visible")?t.push({element:$(".searchpanepart"),size:"col-md-3 col-lg-3"},{element:$(".detailpanepart"),size:"col-md-7 col-lg-8"},{element:n,size:"col-md-2 col-lg-1"}):$(".searchpanepart").is(":visible")?t.push({element:$(".searchpanepart"),size:"col-md-3 col-lg-3"},{element:$(".detailpanepart"),size:"col-md-2 col-lg-1"},{element:n,size:"col-md-9 col-lg-9"}):t.push({element:$(".searchpanepart"),size:"col-md-3 col-lg-3"},{element:$(".detailpanepart"),size:"col-md-2 col-lg-1"},{element:n,size:"col-md-10 col-lg-11"})):n.attr("id")==$(".searchpanepart").attr("id")?$(".listpanepart").is(":visible")?t.push({element:$(".listpanepart"),size:"col-md-5 col-lg-5"},{element:$(".detailpanepart"),size:"col-md-4 col-lg-4"},{element:n,size:"col-md-3 col-lg-3"}):t.push({element:$(".listpanepart"),size:"col-md-8 col-lg-8"},{element:$(".detailpanepart"),size:"col-md-4 col-lg-4"},{element:n,size:"col-md-3 col-lg-3"}):n.attr("id")==$(".listpanepart").attr("id")?$(".detailpanepart").is(":visible")?t.push({element:$(".searchpanepart"),size:"col-md-3 col-lg-3"},{element:$(".detailpanepart"),size:"col-md-4 col-lg-4"},{element:n,size:"col-md-8 col-lg-8"}):t.push({element:$(".searchpanepart"),size:"col-md-3 col-lg-3"},{element:$(".detailpanepart"),size:"col-md-4 col-lg-4"},{element:n,size:"col-md-9 col-lg-9"}):$(".listpanepart").is(":visible")?t.push({element:$(".searchpanepart"),size:"col-md-3 col-lg-3"},{element:$(".listpanepart"),size:"col-md-8 col-lg-8"},{element:n,size:"col-md-4 col-lg-4"}):t.push({element:$(".searchpanepart"),size:"col-md-3 col-lg-3"},{element:$(".listpanepart"),size:"col-md-5 col-lg-5"},{element:n,size:"col-md-9 col-lg-9"}),t},e=function(t){var i=f(t);i[0].element.is(":visible")==!1&&i[1].element.is(":visible")?(n(i[2].size,i[2].element,_webUi.navigationHeader.removeToggleClass),n(i[1].size,i[1].element,_webUi.navigationHeader.removeToggleClass)):i[0].element.is(":visible")&&i[1].element.is(":visible")==!1?(n(i[2].size,i[2].element,_webUi.navigationHeader.removeToggleClass),n(i[0].size,i[0].element,_webUi.navigationHeader.removeToggleClass)):i[0].element.is(":visible")==!1&&i[1].element.is(":visible")==!1&&n("col-md-12 col-lg-12",t,_webUi.navigationHeader.removeToggleClass)},o=function(){var n=s();n.length==1?n[0].addClass("disabled"):$.each(n,function(n,t){t.removeClass("disabled")})},s=function(){var n=[];return $(".listpanepart").is(":visible")&&n.push($(".navlistpane")),$(".detailpanepart").is(":visible")&&n.push($(".navdetailpane")),$(".searchpanepart").is(":visible")&&n.push($(".navsearch")),n},t=function(){o(),$(".searchpanepart").is(":visible")&&$(".listpanepart").is(":visible")&&$(".detailpanepart").is(":visible")?$(".detailpanepart").hasClass("col-lg-1")||$(".listpanepart").hasClass("col-md-2")?(n("col-md-3 col-lg-3",$(".searchpanepart"),_webUi.navigationHeader.removeToggleClass),n("col-md-7 col-lg-8",$(".listpanepart"),_webUi.navigationHeader.removeToggleClass),n("col-md-2 col-lg-1",$(".detailpanepart"),_webUi.navigationHeader.removeToggleClass)):(n("col-md-3 col-lg-3",$(".searchpanepart"),_webUi.navigationHeader.removeToggleClass),n("col-md-5 col-lg-5",$(".listpanepart"),_webUi.navigationHeader.removeToggleClass),n("col-md-4 col-lg-4",$(".detailpanepart"),_webUi.navigationHeader.removeToggleClass)):e(u())},i=function(n,i){h(n),n.attr("id")==$(".searchpanepart").attr("id")?n.is(":visible")&&$(".listpanepart").is(":visible")==!1&&$(".detailpanepart").is(":visible")==!1?i.preventDefault():($(".searchpanepart").toggle(),t()):n.attr("id")==$(".listpanepart").attr("id")?n.is(":visible")&&$(".searchpanepart").is(":visible")==!1&&$(".detailpanepart").is(":visible")==!1?i.preventDefault():($(".listpanepart").toggle(),t()):n.attr("id")==$(".detailpanepart").attr("id")&&(n.is(":visible")&&$(".listpanepart").is(":visible")==!1&&$(".searchpanepart").is(":visible")==!1?i.preventDefault():($(".detailpanepart").toggle(),t()))},h=function(n){var t=WebUi.prototype.getCurrentFormId(),i=n.attr("data-name")+"displayPreferenceVisible";localStorage[t+i+_webSession.UserName()]=!n.is(":visible")};return{removeToggleClass:["col-md-1 col-lg-1","col-md-2 col-lg-1","col-md-2 col-lg-2","col-md-3 col-lg-3","col-md-4 col-lg-4","col-md-5 col-lg-5","col-md-6 col-lg-6","col-md-7 col-lg-7","col-md-7 col-lg-8","col-md-8 col-lg-8","col-md-9 col-lg-9","col-md-10 col-lg-10","col-md-11 col-lg-11","col-md-10 col-lg-11","col-md-12 col-lg-12"],configureToggle:function(){$("[data-toggle=search]").click(function(n){var t=$(".searchpanepart");t.is(":visible")&&$(".listpanepart").is(":visible")==!1&&$(".detailpanepart").is(":visible")==!1||$("[data-toggle=search]").toggleClass("visiblepane"),i(t,n)}),$("[data-toggle=listpane]").click(function(n){var t=$(".listpanepart");t.is(":visible")&&$(".searchpanepart").is(":visible")==!1&&$(".detailpanepart").is(":visible")==!1||$("[data-toggle=listpane]").toggleClass("visiblepane"),i(t,n),t.is(":visible")&&$(".equalize").equalize({reset:!0})}),$("[data-toggle=detailpane]").click(function(n){var t=$(".detailpanepart");t.is(":visible")&&$(".listpanepart").is(":visible")==!1&&$(".searchpanepart").is(":visible")==!1||$("[data-toggle=detailpane]").toggleClass("visiblepane"),i(t,n),t.is(":visible")?_webUi.Grid.loadDetailPaneOnToggle():_webUi.detailPane.detailPaneModel=null}),$("[data-toggle=dashboardTiles]").click(function(){var i=$("#dashboardTiles");i.is(":visible")?($("[data-toggle=dashboardTiles]").toggleClass("visiblepane"),$("#dashboardTiles").toggle(),n("col-md-12 col-lg-12",$("#dashboardCharts"),_webUi.navigationHeader.removeToggleClass)):($("[data-toggle=dashboardTiles]").toggleClass("visiblepane"),$("#dashboardTiles").toggle(),n("col-md-10 col-lg-10",$("#dashboardCharts"),_webUi.navigationHeader.removeToggleClass))})},changeEnvironment:function(n){getUserInformationCookieValue("Environment")!==n&&_webUi.dialog.showYesNoConfirmation(ResourceManager.GetResource("MSG_ENVIRONMENT08",ResourceManager.ResourceType.Msg).TEXT).then(function(t){t&&(_webUi.navigationTrail.deleteNavTrailInfo(),window.location.href="/scale/security/changeEnvironment?name="+n)})},getHomePage:function(){var n=localStorage[r],t;return n&&window.location.pathname.split("/")[1].toLowerCase()==="tpm"?n.split("/")[1].toLowerCase()==="tpm"?n:(t=$("#isExternalTpmUser").val().toLowerCase()==="true"?!0:!1,t?undefined:n):n},goToHomePage:function(){var n=_webUi.navigationHeader.getHomePage();n?location.href.endsWith(n)?location.reload():location.href=n:window.location.pathname.split("/")[1].toLowerCase()=="tpm"?location.href.endsWith("/tpm/trans/tpmdashboard")?location.reload():location.href="/tpm/trans/tpmdashboard":location.href.endsWith("/scale/trans/dashboard")?location.reload():location.href="/scale/trans/dashboard"},closeNavDropdown:function(n){$("div.nav.dropdown").hasClass("open")&&$(n.target).parents().eq(2).is("div.nav.dropdown")===!1&&$(".open").removeClass("open");return},loadDefaultDisplayPreference:function(){var t=WebUi.prototype.getCurrentFormId(),n=$(".searchpanepart").attr("data-name")+"displayPreferenceVisible",i=localStorage[t+n+_webSession.UserName()],r;i!=undefined&&i=="true"||$("[data-toggle=search]").click(),n=$(".listpanepart").attr("data-name")+"displayPreferenceVisible",i=localStorage[t+n+_webSession.UserName()],i==undefined||localStorage[t+n+_webSession.UserName()]=="true"||$("[data-toggle=listpane]").click(),n=$(".detailpanepart").attr("data-name")+"displayPreferenceVisible",i=localStorage[t+n+_webSession.UserName()],i==undefined||localStorage[t+n+_webSession.UserName()]=="true"||$("[data-toggle=detailpane]").click(),r=localStorage[t+"ListPaneSummary-displayPreferenceVisible"+_webSession.UserName()],r==="false"?_webUi.insightListPaneActions.toggleSummaryButtonClicked(null):$("li.summaryToggle a").addClass("visiblepane")},onActionsMenuPopup:function(){_webUi.Grid.rowChangedEvtData?_webUi.Grid.modifyActionsBasedOnSelection(_webUi.Grid.rowChangedEvtData.data,_webUi.Grid.activeGridUi):_webUi.Grid.modifyActionsBasedOnSelection(null,_webUi.Grid.activeGridUi)},setCurrentAsHomePage:function(){localStorage[r]=_webUi.helper.removeHashToggleFromUrl(_webUi.helper.removeAllQueryParamsFromUrl(_webUi.helper.getRelativeUrlFromAbsoluteUrl(location.href)))}}}(),_webUi.navigationTrail=function(){var u=11,f=function(n,t){var i={};return i.url=t,i.url=_webUi.helper.removeQueryParamFromUrl(i.url,"_MSGWARN"),i.url=_webUi.helper.removeQueryParamFromUrl(i.url,"_MSGSUCCESS"),i.url=_webUi.helper.removeQueryParamFromUrl(i.url,"_MSGERROR"),(i.url.toLowerCase().indexOf("/insights/")>-1||i.url.toLowerCase().indexOf("/insight/")>-1)&&(i.url=_webUi.helper.removeQueryParamFromUrl(i.url,"selectRows"),i.url=_webUi.helper.setQueryParameter(i.url,{selectRows:"Y"})),i.title=n,i},t=function(){var n=sessionStorage.getItem("data-UniqueId"),t;return(!n||history&&history.length===1)&&(t=_webUi.createGuid(),n=t,sessionStorage.setItem("data-UniqueId",t)),n},e=function(n,t,i){var r=n,u=n.indexOf("#search");return u>-1&&(r=n.substring(0,u)+n.substring(u+7,n.length)),r=_webUi.helper.removeQueryParamFromUrl(r,"filters"),r=_webUi.helper.removeQueryParamFromUrl(r,"advancedFilters"),i?_webUi.helper.setQueryParameter(r,{filters:i}):t&&t.advFltrs&&t.advFltrs.length>0?_webUi.helper.setQueryParameter(r,{filters:"Y"}):r},i=function(n,t,i,r){if(t||i||r){if($.trim(t)==="Warning")return _webUi.helper.setQueryParameter(n,{_MSGWARN:r?r:i});if($.trim(t)==="Error")return _webUi.helper.setQueryParameter(n,{_MSGERROR:r?r:i});if(i||r)return _webUi.helper.setQueryParameter(n,{_MSGSUCCESS:r?r:i})}return n},r=function(t){var r=sessionStorage.getItem("data-Stack"+t),i=null,u={};return i=r?JSON.parse(r):[],i=s(i,document.title),n(window.location.href)&&(u=f(document.title,window.location.href),i.push(u)),i=o(i),sessionStorage.setItem("data-Stack"+t,JSON.stringify(i,_webUi.dateReplacer)),window.parent._webUi.dialog.showingUrlInModal===!1&&(n(window.location.href)?i.length===1&&$(".menubuttoncancel").hide():i.length===0&&$(".menubuttoncancel").hide()),i},o=function(t){return n(window.location.href)?t&&t.length>u&&t.splice(0,1):t&&t.length>u-1&&t.splice(0,1),t},s=function(n,t){var i=h(n,t);return i>-1?c(n,i):n},h=function(n,t){for(var i=n.length-1;i>=0;i--)if(n[i].title===t)return i;return-1},n=function(n){return n===null||n===undefined||n.toLowerCase().indexOf("/security/login")>-1||n.indexOf("modal=")>-1||n.indexOf("excludeFromNavTrail=Y")>-1||n.toLowerCase().indexOf("/general/error")>-1?!1:!0},c=function(n,t){return n.splice(t,1),n},l=function(n){var i=$("#navTrail"),t,r;if(i)for($(i).empty(),t=n.length-1;t>=0;t--)r=$("<li />").appendTo(i),$("<a />",{href:n[t].url,text:n[t].title}).appendTo(r)};return{deleteNavTrailInfo:function(){var u=t(),n,r,i;sessionStorage.removeItem("data-Stack"+u),n=[];for(r in sessionStorage)n.push(r);for(i=0;i<n.length;i++)n[i]&&(n[i].indexOf("advanceCriteriaJson")>-1||n[i].indexOf("_LastSelected")>-1)&&sessionStorage.removeItem(n[i])},doesUrlIndicateFlowShouldNavigateToPreviousPage:function(){return window.location.href&&window.location.href.toLowerCase().indexOf("navtoprev")>-1},handleNavTrailOnScreenLoad:function(){var u=t(),f=r(u),i=f;n(window.location.href)&&i.pop(),l(i)},navigateBackToPreviousPage:function(u,f,e,o){var c,l;if(window.parent._webUi.dialog.showingUrlInModal===!0)!u&&window.parent._webUi.Grid&&window.parent._webUi.Grid.refreshData(),u?window.parent._webUi.dialog.hideUrlInModalDialog("UrlModal"):o?(window.parent._webUi.msgManager.displayNotificationMessage({Message:o,MessageType:f},null),window.parent._webUi.dialog.hideUrlInModalDialog("UrlModal")):e&&ResourceJSPromise.then(function(){var n=ResourceManager.GetResource(e,ResourceManager.ResourceType.Msg).TEXT;window.parent._webUi.msgManager.displayNotificationMessage({Message:n,MessageType:f},null),window.parent._webUi.dialog.hideUrlInModalDialog("UrlModal")});else{var a=t(),s=r(a),h=n(window.location.href);s&&(h&&s.length>1||!h&&s.length>0)?(c=h?s.length-2:s.length-1,c>-1&&(l=s[c].url,n(window.location.href)&&s.pop(),sessionStorage.setItem("data-Stack"+a,JSON.stringify(s,_webUi.dateReplacer)),window.location=u?i(l,null,null,null):i(l,f,e,o))):u||(o?_webUi.msgManager.displayNotificationMessage({Message:o,MessageType:f},null):e&&ResourceJSPromise.then(function(){var n=ResourceManager.GetResource(e,ResourceManager.ResourceType.Msg).TEXT;_webUi.msgManager.displayNotificationMessage({Message:n,MessageType:f},null)}))}},navigateBackToPreviousPageErrorMsg:function(u,f,e,o){var a=t(),s=r(a),c=n(window.location.href),l,h;s&&(c&&s.length>1||!c&&s.length>0)&&(l=c?s.length-2:s.length-1,l>-1&&(h=s[l].url,n(window.location.href)&&s.pop(),sessionStorage.setItem("data-Stack"+a,JSON.stringify(s,_webUi.dateReplacer)),h=i(h,"Success",f,u),window.location=i(h,"Error",o,e)))},updateNavTrail:function(n,i){var o=sessionStorage.getItem("data-Stack"+t()),r=null,e,u;for(r=o?JSON.parse(o):[],e=f(n,i),u=0;u<r.length;u++)if(r[u].title===e.title){r[u]=e,sessionStorage.setItem("data-Stack"+t(),JSON.stringify(r,_webUi.dateReplacer));return}},setFiltersForCurrentInsightScreen:function(n,i,u){var s=t(),f=r(s),h=f.pop(),o={};o.url=e(h.url,i,u),o.title=h.title,f.push(o),sessionStorage.setItem("data-Stack"+s,JSON.stringify(f,_webUi.dateReplacer))}}}(),_webUi.resetdefaultsettings=function(){var n=function(){var r=WebUi.prototype.getCurrentFormId(),u,i,t,n,f,e;if(r&&r!==0){for(u=r.length,i=[],t=0;t<localStorage.length;t++)if(n=localStorage.key(t),n.substring(0,u)===r){if($("#chkListPaneDataGridgridGroupColumnsPreference").prop("checked"))if(n.contains("gridGroupColumnsPreference"+_webSession.UserName())){i[t]=n;continue}else if(n.contains("areaLocalPreferencesApplied"+_webSession.UserName())){i[t]=n;continue}if($("#chkListPaneDataGridgridColumnPreference").prop("checked")&&n.contains("gridColumnPreference"+_webSession.UserName())){i[t]=n;continue}if($("#chkListPaneDataGridgridSortPreference").prop("checked")){if(n.contains("gridSortPreference"+_webSession.UserName())){i[t]=n;continue}if(n.contains("gridSortPrefExpression"+_webSession.UserName())){i[t]=n;continue}}}$.each(i,function(){localStorage.removeItem(this)}),i.length>0&&(_webUi.detailsScreenBinding&&_webUi.detailsScreenBinding.viewModel&&_webUi.detailsScreenBinding.viewModel.model&&_webUi.detailsScreenBinding.viewModel.model.PostFormData?(f=JSON.parse(_webUi.detailsScreenBinding.viewModel.model.PostFormData()),e=_webUi.helper.getRelativeUrlFromAbsoluteUrl(location.href),_webUi.helper.refreshUrlInCurrentTabWithPost(f,e)):location.reload())}};return{resetSettings:function(t,i,r){_webUi.dialog.showYesNoConfirmation(i,r).then(function(i){i?n():t&&_webUi.dialog.showModalDialog(t)})}}}(),_webUi.summarytile=function(){return{getTileValue:function(n,t){var i,r,u,f;return isNaN(n)?n:(Math.abs(Number(n))>=1e12?(i=Math.abs(Number(n))/1e12,r="t"):Math.abs(Number(n))>=1e9?(i=Math.abs(Number(n))/1e9,r="b"):Math.abs(Number(n))>=1e6?(i=Math.abs(Number(n))/1e6,r="m"):Math.abs(Number(n))>=1e3?(i=Math.abs(Number(n))/1e3,r="k"):(i=Math.abs(Number(n)),r=""),i%1>0&&(t===undefined||t||r!=""&&!t)&&(u=Math.pow(10,1),i=Math.round(i*u)/u),n<0&&(i=i*(n/Math.abs(n))),f=(i.toString().split(".")[1]||[]).length,i.toLocaleString(undefined,{minimumFractionDigits:f})+r)}}}(),_webUi.systemMenu=function(){var n,t=!1,i,u=["_MSGSUCCESS","_MSGWARN","_MSGERROR","selectRows","filters"],f=function(t){$("#saveMenuFavoriteDialog").modal("hide"),t.menuFavorite!=null&&$("#menuFavoriteLinks").append('<li><a href="'+n+'" data-resourcekey="" data-resourcevalue="'+t.menuFavorite.Name+'" class="navmenuchild favwidth">'+t.menuFavorite.Name+'<\/a><span onclick="_webUi.systemMenu.deleteFavorite('+t.menuFavorite.ObjectId.toString()+');" class="glyphicon glyphicon-remove-circle deleteFavoriteButton hiddenButton"><\/span><\/li>'),$(".favoriteEditButton").hasClass("favoriteEditBlue")&&$(".deleteFavoriteButton").removeClass("hiddenButton"),$("#menuFavoriteLinks li").size()===1&&($(".favoriteEditButton").removeClass("hiddenButton"),$(".deleteFavoriteButton").addClass("hiddenButton"),$(".favoriteEditButton").removeClass("favoriteEditBlue"))},e=function(){for(var f=$("#menuFavoriteLinks li"),u=0;u<f.length;u++)if($(f[u]).children()[1].onclick.toString().indexOf(i)>-1){f[u].parentNode.removeChild(f[u]);break}$("#menuFavoriteLinks li").size()==0&&($(".favoriteEditButton").removeClass("favoriteEditBlue"),$(".favoriteEditButton").addClass("hiddenButton"))},o=function(n,t){if(t&&t.length>0)for(var i=0;i<t.length;i++)n=s(n,t[i]);return n},s=function(n,t){var u=n.split("?"),r;if(u.length>=2){var f=u.shift(),e=u.join("?"),o=encodeURIComponent(t)+"=",i=e.split(/[&;]/g);for(r=i.length;r-->0;)i[r].lastIndexOf(o,0)!==-1&&i.splice(r,1);n=f+"?"+i.join("&")}return n},h=function(n){for(var i=$("#menuFavoriteLinks li"),r=n.toUpperCase().trim(),t=0;t<i.length;t++)if($(i[t]).children().first().text().toUpperCase()===r)return!0;return!1},r=function(n){$(".favoriteModalError").css("display","none"),$("#"+n).css("display","block");return},c=function(n,t,i){$("#saveMenuFavoriteDialog").modal("hide"),HttpRequest.prototype.defaultErrorCallback(n,t,i)},l=function(){$(document).ready(function(){$(document.body).keypress(function(n){if(n.which===13&&$("#favoriteName").is(":focus"))return _webUi.systemMenu.saveFavorite(),t=!0,!1})}),t=!0};return{loadSystemMenuPreference:function(){var n=_webUi.LocalStorage.getLocalStorage(null,null,"systemMenuPreference-"+WebSession.prototype.UserName()),t;n!==undefined&&n!=="FAVORITES"&&(n===""?$("Div[data-name='MenuAccordion']").accordion("option","active",!1):(t=$("[data-name= '"+n+"']"),t.show(),t.prev().click()))},systemMenuActivate:function(n,t){var i=t.newPanel.hasClass("ui-accordion-content-active"),r=i?t.newPanel[0].attributes["data-name"].value:"";_webUi.LocalStorage.setLocalStorage(null,null,"systemMenuPreference-"+WebSession.prototype.UserName(),r)},saveFavorite:function(){var t=$("#favoriteName").val().trim(),i;if(!t)return r("favoriteNameError");if(t=t.charAt(0).toUpperCase()+t.slice(1),h(t))return r("favoriteDuplicateError");n=o(window.location.pathname+location.search,u),i={},i.FormId=parseInt($("#formId").attr("value")),i.Name=t,i.UserName=WebSession.prototype.UserName(),i.Path=n,_httpRequest.performPost("/general/scaleapi/MenuFavoriteApi/",i,f,c,!1)},deleteFavorite:function(n){return ResourceJSPromise.then(function(){_webUi.dialog.showYesNoConfirmation(ResourceManager.GetResource("MSG_DELETEFAVORITE01",ResourceManager.ResourceType.Msg).TEXT,"MSG_DELETEFAVORITE01").then(function(t){t&&(i=n,_httpRequest.performDelete("/general/scaleapi/MenuFavoriteApi?objectId="+n,e,null,!0))})}),!1},toggleDeleteButtons:function(){$(".deleteFavoriteButton").css("display")==="none"?($(".favoriteEditButton").addClass("favoriteEditBlue"),$(".deleteFavoriteButton").removeClass("hiddenButton")):($(".favoriteEditButton").removeClass("favoriteEditBlue"),$(".deleteFavoriteButton").addClass("hiddenButton"))},searchComboDropdownClosed:function(){var i=$("#MainMenuSearchCombo").igCombo("activeIndex"),r;i>=0&&(r=$("#MainMenuSearchCombo").igCombo("option","dataSource").data()[i].Path,window.location=r)},showSaveFavoritesDialog:function(){var n=Q.defer();return ResourceJSPromise.then(function(){var r="ADDFAVORITE",u="ENTERNAME",f=ResourceManager.GetResource(r,ResourceManager.ResourceType.Text).TEXT,e=ResourceManager.GetResource(u,ResourceManager.ResourceType.Text).TEXT,o=Handlebars.compile(saveFavoriteTemplate),n=o({Message:e,Token:u,TitleKey:r,Title:f,ScreenTitle:document.title}),n=$("<div>"+n+"<\/div>"),i;n=resourceKeySwitch==="OFF"?ShowResourceValue(n):ShowResourceKey(n),t||l(),$("#saveFavoriteArea").html(n),i=$("#saveMenuFavoriteDialog");i.on("shown.bs.modal",function(){$("#favoriteName",this).focus(),$("#favoriteName",this).select()});i.modal("show")}),n.promise}}}(),_webUi.toggleSwitch=function(){return{setToggleStateForDisabledSwitch:function(n,t){$("#"+n).bootstrapToggle("enable"),$("#"+n).bootstrapToggle(t),$("#"+n).bootstrapToggle("disable")},toggleChanged:function(n){var r=n.target.id,i=$("#"+r),u;i.attr("data-togglegroup")!=undefined&&i.prop("checked")&&(u="input[data-togglegroup='"+i.attr("data-togglegroup")+"']",$(u).each(function(){if($(this)[0].id!==r){var t=$(this)[0].id;$(document).undelegate("#"+t,"change",_webUi.toggleSwitch.toggleChanged),$("#"+t).bootstrapToggle("off"),$(document).delegate("#"+t,"change",_webUi.toggleSwitch.toggleChanged)}}))},scaleToggle:{init:function(n,t){var u,f,e;if(f=t(),e=!1,!ko.isWriteableObservable(f))throw"You must pass an observable or writeable computed";u=$(n),u.addClass("notinitialized");u.on("click",function(){return u.hasClass("notinitialized")?f(f()):f(!f()),!1});ko.computed({disposeWhenNodeIsRemoved:n,read:function(){var t=f();u.hasClass("notinitialized")&&(t?(n.disabled&&(u.bootstrapToggle("enable"),e=!0),u.bootstrapToggle("on"),e&&(u.bootstrapToggle("disable"),e=!1)):u.bootstrapToggle("off"),u.removeClass("notinitialized"))}})}}}}(),_webUi.validate=function(){$(document).ready(function(){u()});var t=function(n){n&&$(":input",n).not(":button, :submit, :reset").each(function(n,t){var r;t.name?r=t.name:t.id.indexOf("EditingInput")>0&&(r=t.id.substring(0,t.id.indexOf("EditingInput"))),r&&i(r)})},i=function(n){var t=$("[id="+n+"]"),i=t.attr("data-controltype");i&&i==="igCombo"&&t.data("igCombo")&&(t.igCombo("selectedItems")||t.igCombo("value"))?t.igCombo("selectedItems")?$("[name="+n+"]").val(t.igCombo("selectedItems")[0].data[t.igCombo("option","valueKey")]):$("[name="+n+"]").val($("#"+n).igCombo("value")):i&&i==="igTextEditor"?t.attr("data-bind")&&t.attr("data-bind").contains("igMaskEditor")?$("[name="+n+"]").val(t.igMaskEditor("value")):$("[name="+n+"]").val(t.igTextEditor("value")):i&&i==="igNumericEditor"?$("[name="+n+"]").val(t.igNumericEditor("value")):i&&i==="igDatePicker"?t.igDatePicker("value")&&t.igDatePicker("value")!==""?$("[name="+n+"]").val(t.igDatePicker("value").toISOString()):$("[name="+n+"]").val(t.igDatePicker("value")):i&&i==="igTimePicker"?t.igTimePicker("value")&&t.igTimePicker("value")!==""?$("[name="+n+"]").val(t.igTimePicker("value").toISOString()):$("[name="+n+"]").val(t.igTimePicker("value")):i&&i==="igDateTimeEditor"?t.igDateEditor("value")&&t.igDateEditor("value")!==""?$("[name="+n+"]").val(t.igDateEditor("value").toISOString()):$("[name="+n+"]").val(t.igDateEditor("value")):$("[name="+n+"]").val(t.val())},n=function(){if(document.forms!=null&&document.forms.length>0){var n=$(document.forms[0]).validate({ignore:".ignore",onfocusout:!1,onkeyup:!1,onclick:!1});n==null&&$(document.forms[0]).validate()}},r=function(n){var t,i;if(n)return t=n.validate({ignore:".ignore",onfocusout:!1,onkeyup:!1,onclick:!1}),t.form()?!0:(i=$(t.errorList[0].element).attr("data-valtype"),i&&i==="igCombo"?$("#"+t.errorList[0].element.name).igCombo("textInput").focus():$("#"+t.errorList[0].element.name).focus(),!1)},u=function(){$.validator.addMethod("numericnotequals",function(n,t,i){return parseFloat(n)!==parseFloat(i)})};return{setValidationDefaults:function(){jQuery.validator.setDefaults({onfocusout:!1,onkeyup:!1,onclick:!1,errorPlacement:function(n,t){var i=t.attr("data-valType");i&&(i==="igCombo"||i==="igTextEditor"||i==="igNumericEditor"||i==="igDatePicker"||i==="igTimePicker")||i==="igDateTimeEditor"?n.insertAfter("div."+t.context.name+"Error"):n.insertAfter(t)}})},validateElement:function(n){$.trim(n.currentTarget.id)&&i(n.currentTarget.id);var t=$("form:not([id=signOutForm]):not([id=ResetSettingsModalDialogForm]):first"),r=t.validate({ignore:".ignore",onfocusout:!1,onkeyup:!1,onclick:!1});return r.element("[name="+n.currentTarget.id+"]")?!0:($("#"+n.currentTarget.id).focus(),!1)},revalidateClosestFormOnComboBoxSelectionChange:function(n){var i=n.currentTarget.id,s=$("#"+i).closest("form"),r=$("#"+i),u,f,e,o;return s&&r?(u=$("[name="+i+"]"),f=r.igCombo("selectedItems"),e=f?f[0].data[r.igCombo("option","valueKey")]:null,u.val(e),o=s.validate({ignore:".ignore",onfocusout:!1,onkeyup:!1,onclick:!1}),o.element(u)?!0:($("#"+o.errorList[0].element.name).igCombo("textInput").focus(),!1)):!0},validateModalDialogForm:function(n){var u=n.currentTarget.id,i=$("#"+u).closest("form");return n&&n.data.ModalDialogName&&i?(t(i),r(i)):!0},validateMainForm:function(){var n=$("form:not([id=signOutForm]):not([id=ResetSettingsModalDialogForm]):first");return n?(t(n),r(n)):!0},enableRequiredValidation:function(t,i){var u=$(t).closest("form"),r;if(u.validate({ignore:".ignore",onfocusout:!1,onkeyup:!1,onclick:!1}),i===undefined||i===""){$(t).removeClass("ignore");try{n(),$(t).rules("add",{required:!0})}catch(f){}}else $(t).removeClass("ignore"),$(t).rules("add",{required:!0}),r=$(t).attr("data-msg-required"),(r===undefined||r==="")&&$(t).attr("data-msg-required",i)},disableRequiredValidation:function(t){$(t).addClass("ignore");try{n();var i=$(t).closest("form");i.validate({ignore:".ignore",onfocusout:!1,onkeyup:!1,onclick:!1}),$(t).rules("add",{required:!1})}catch(r){}},addOrUpdateValidationRule:function(t,i,r,u){var e,f;try{n(),e={},e[i]=u,f={},f[i]=r,f.messages=e,$(t).rules("add",f)}catch(o){}}}}()